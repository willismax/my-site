<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Willismax 威力斯資訊技部落格! | Will is MAX</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://willismax.github.io/my-site/en/blog"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="robots" content="max-image-preview:large"><meta data-rh="true" name="威力斯" content="Python, ICT, Tech"><meta data-rh="true" name="robots" content="max-image-preview:large"><meta data-rh="true" property="og:title" content="Willismax 威力斯資訊技部落格! | Will is MAX"><meta data-rh="true" name="description" content="威力斯在技術上不停地踩坑與填坑，分享技術與應用的心得"><meta data-rh="true" property="og:description" content="威力斯在技術上不停地踩坑與填坑，分享技術與應用的心得"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/my-site/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://willismax.github.io/my-site/en/blog"><link data-rh="true" rel="alternate" href="https://willismax.github.io/my-site/blog" hreflang="zh-TW"><link data-rh="true" rel="alternate" href="https://willismax.github.io/my-site/en/blog" hreflang="en"><link data-rh="true" rel="alternate" href="https://willismax.github.io/my-site/blog" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://HRS5TFT9KD-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/my-site/en/blog/rss.xml" title="Will is MAX RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/my-site/en/blog/atom.xml" title="Will is MAX Atom Feed">
<link rel="alternate" type="application/json" href="/my-site/en/blog/feed.json" title="Will is MAX JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-N364955R5S"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-N364955R5S",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Will is MAX" href="/my-site/en/opensearch.xml"><link rel="stylesheet" href="/my-site/en/assets/css/styles.ac24ca67.css">
<link rel="preload" href="/my-site/en/assets/js/runtime~main.2183db32.js" as="script">
<link rel="preload" href="/my-site/en/assets/js/main.97c40906.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">⭐️ 如果這個網站能幫助到你，歡迎給一個Star支持作者  <a target="_blank" rel="noopener noreferrer" href="https://github.com/willismax/my-site">GitHub</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/my-site/en/"><div class="navbar__logo"><img src="/my-site/en/img/logo.svg" alt="Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/my-site/en/img/logo.svg" alt="Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">WillisMax</b></a><a class="navbar__item navbar__link" href="/my-site/en/docs/intro">教學與技術文</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/my-site/en/blog">文章</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/my-site/en/about">關於我</a><a href="https://github.com/willismax/my-site" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/my-site/en/blog/使用 n8n 串接 LINE BOT + AI：打造智慧回應機器人">使用 n8n 串接 LINE BOT + AI：打造智慧回應機器人</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/my-site/en/blog/使用 Whisper 離線完成聲音轉文字">使用 Whisper 離線完成聲音轉文字</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/my-site/en/blog/如何使用 GitHub Codespace 建立並部署 LINE Bot">如何使用 GitHub Codespace 建立並部署 LINE Bot</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/my-site/en/blog/Customize Your AI Teaching Assistant - A Socratic Approach">🤖 客製化你的AI教學助手-蘇格拉底引導教學法</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/my-site/en/blog/Python 虛擬環境管理 - pipenv 與 venv 比較">Python 虛擬環境管理 - pipenv 與 venv 比較</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/my-site/en/blog/在 Render 上快速部署 HackMD 與 LINE 的聊天機器人">在 Render 上快速部署 HackMD 與 LINE 的聊天機器人</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/my-site/en/blog/使用 LM Studio 輕鬆在筆電上建立自己的聊天機器人">使用 LM Studio 輕鬆在筆電上建立自己的聊天機器人</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/my-site/en/blog/Selenium升級4.x版修正筆記">Selenium升級4.x版修正筆記</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/my-site/en/blog/用PlayWright抓取動態網站資料">用PlayWright抓取動態網站資料</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/my-site/en/blog/用HackMD API打造個人專屬LINE BOT助手">用HackMD API打造個人專屬LINE BOT助手</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/my-site/en/blog/2023六角學院軟體工程師體驗營心得">2023六角學院軟體工程師體驗營心得</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/my-site/en/blog/從亞當斯密看不見的手認識ESG">從亞當斯密看不見的手認識ESG</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/my-site/en/blog/使用 GitHub Actions 自動部署 Docusaurus 網誌並優化 SEO">使用 GitHub Actions 自動部署 Docusaurus 網誌並優化 SEO</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/my-site/en/blog/用 Colab 免費體驗 AI 繪圖">用 Colab 免費體驗 AI 繪圖</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/my-site/en/blog/使用GitHubPages部署Docusaurus">使用GitHubPages部署Docusaurus</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/my-site/en/blog/使用 n8n 串接 LINE BOT + AI：打造智慧回應機器人">使用 n8n 串接 LINE BOT + AI：打造智慧回應機器人</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2025-02-16T20:00:00.000Z" itemprop="datePublished">February 16, 2025</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/willismax.png" alt="Willis Chen"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Willis Chen</span></a></div><small class="avatar__subtitle" itemprop="description">Tech Instructor</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>在聊天機器人盛行的時代，許多人都想透過 <strong>LINE BOT</strong> 為用戶提供即時且智慧的回覆。本篇將示範如何在 <strong>n8n</strong> 這個無程式化自動化工具中，串接 <strong>LINE Webhook</strong> 與 <strong>AI 模型</strong>，打造一個可以自動回應的機器人。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="目錄">目錄<a href="#目錄" class="hash-link" aria-label="Direct link to 目錄" title="Direct link to 目錄">​</a></h2><ol><li><a href="#%E5%89%8D%E7%BD%AE%E6%BA%96%E5%82%99">前置準備</a>  </li><li><a href="#%E6%B5%81%E7%A8%8B%E6%9E%B6%E6%A7%8B%E8%AA%AA%E6%98%8E">流程架構說明</a>  </li><li><a href="#%E8%A9%B3%E7%B4%B0%E6%AD%A5%E9%A9%9F%E6%95%99%E5%AD%B8">詳細步驟教學</a>  <ul><li><a href="#step-1-%E5%BB%BA%E7%AB%8B-line-bot-%E8%88%87-webhook">STEP 1. 建立 LINE BOT 與 Webhook</a>  </li><li><a href="#step-2-%E5%9C%A8-n8n-%E6%96%B0%E5%A2%9E-workflow">STEP 2. 在 n8n 新增 Workflow</a>  </li><li><a href="#step-3-ai-%E5%9B%9E%E6%87%89%E9%82%8F%E8%BC%AF%E8%A8%AD%E5%AE%9A">STEP 3. AI 回應邏輯設定</a>  </li><li><a href="#step-4-%E5%90%88%E4%BD%B5%E8%B3%87%E6%96%99%E4%B8%A6%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BC%B8%E5%87%BA-code-node">STEP 4. 合併資料並格式化輸出 (Code Node)</a>  </li><li><a href="#step-5-%E5%91%BC%E5%8F%AB-line-reply-api-%E5%9B%9E%E8%A6%86%E8%A8%8A%E6%81%AF">STEP 5. 呼叫 LINE Reply API 回覆訊息</a>  </li></ul></li><li><a href="#%E5%85%A9%E5%80%8B%E5%B8%B8%E8%A6%8B%E7%97%9B%E9%BB%9E%E8%88%87%E8%A7%A3%E6%B3%95">兩個常見痛點與解法</a>  </li><li><a href="#%E5%AE%8C%E6%95%B4-workflow-json-%E5%8F%83%E8%80%83">完整 Workflow JSON 參考</a>  </li><li><a href="#%E5%8F%83%E8%80%83%E4%BE%86%E6%BA%90">參考來源</a></li></ol><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="前置準備">前置準備<a href="#前置準備" class="hash-link" aria-label="Direct link to 前置準備" title="Direct link to 前置準備">​</a></h2><ol><li><strong>LINE Developers 帳號</strong>：  <ul><li>前往 <a href="https://developers.line.biz/" target="_blank" rel="noopener noreferrer">LINE Developers</a> 建立 <strong>Messaging API</strong> Channel，取得 <strong>Channel Access Token</strong> 與 <strong>Channel Secret</strong>。  </li></ul></li><li><strong>n8n 環境</strong>：  <ul><li>可以是自架 n8n 或使用雲端服務，版本建議至少 1.6.0 以上。  </li></ul></li><li><strong>AI Key</strong>：  <ul><li>若使用 OpenAI，需要在 n8n 中綁定你的 OpenAI API Key；若使用其他 AI (如 Google Gemini)，則需相對應的憑證設定。  </li></ul></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="流程架構說明">流程架構說明<a href="#流程架構說明" class="hash-link" aria-label="Direct link to 流程架構說明" title="Direct link to 流程架構說明">​</a></h2><p>以下為大致的流程圖：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(1) 使用者在 LINE 發送訊息</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(2) LINE 將訊息 + replyToken 發送到 n8n Webhook</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(3) n8n 取得訊息後，呼叫 AI 節點產生回應</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(4) 將 AI 回應與 replyToken 整合 (Code Node)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(5) HTTP Request Node 回呼給 LINE (Reply API)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(6) 使用者即時收到 AI 生成的回應</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="詳細步驟教學">詳細步驟教學<a href="#詳細步驟教學" class="hash-link" aria-label="Direct link to 詳細步驟教學" title="Direct link to 詳細步驟教學">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-建立-line-bot-與-webhook">STEP 1. 建立 LINE BOT 與 Webhook<a href="#step-1-建立-line-bot-與-webhook" class="hash-link" aria-label="Direct link to STEP 1. 建立 LINE BOT 與 Webhook" title="Direct link to STEP 1. 建立 LINE BOT 與 Webhook">​</a></h3><ol><li>登入 <a href="https://developers.line.biz/" target="_blank" rel="noopener noreferrer">LINE Developers Console</a>，在 <strong>Messaging API</strong> 中建立一個 Channel。  </li><li>取得 <strong>Channel Access Token</strong> (Long-lived) 並備註。  </li><li>在該 Channel 的 <strong>Webhook settings</strong> 裡面，填入你的 n8n Webhook URL (例如 <code>https://&lt;你的n8n網域&gt;/webhook/linebot</code>)，並啟用 Webhook。</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-在-n8n-新增-workflow">STEP 2. 在 n8n 新增 Workflow<a href="#step-2-在-n8n-新增-workflow" class="hash-link" aria-label="Direct link to STEP 2. 在 n8n 新增 Workflow" title="Direct link to STEP 2. 在 n8n 新增 Workflow">​</a></h3><ol><li>建立一個新的 Workflow，新增 <strong>Webhook Node</strong>，HTTP Method 選 <strong>POST</strong>，Path 設為 <code>linebot</code> (或其他自訂)。  </li><li>完成後，記得啟用這個 Workflow，使得該 Webhook 可對外接受請求。</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-ai-回應邏輯設定">STEP 3. AI 回應邏輯設定<a href="#step-3-ai-回應邏輯設定" class="hash-link" aria-label="Direct link to STEP 3. AI 回應邏輯設定" title="Direct link to STEP 3. AI 回應邏輯設定">​</a></h3><ol><li>新增一個 <strong>AI 節點</strong> (例如 <code>AI Agent</code> 或 <code>OpenAI Chat Model</code>)，將上一步 Webhook 輸入的文字 (<code>message.text</code>) 當作 Prompt 的一部分，生成自動回覆。  </li><li>可在 Prompt 中告訴 AI 要使用繁體中文回應、若有來源請告知等。  </li><li>測試一下該 AI 節點是否能產生正確文字輸出。</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-合併資料並格式化輸出-code-node">STEP 4. 合併資料並格式化輸出 (Code Node)<a href="#step-4-合併資料並格式化輸出-code-node" class="hash-link" aria-label="Direct link to STEP 4. 合併資料並格式化輸出 (Code Node)" title="Direct link to STEP 4. 合併資料並格式化輸出 (Code Node)">​</a></h3><ol><li>因為 <strong>Webhook Node</strong> 帶來 <code>replyToken</code>，而 <strong>AI Node</strong> 帶來 <code>AI 回應文字</code>，你需要一個 <strong>Merge Node</strong> 或透過 Code Node 同時取得這兩部分。  </li><li>在 Code Node 中，先拿到 <code>replyToken</code>、再拿到 AI 回傳的文字，並<strong>特別使用 <code>JSON.stringify()</code></strong>，以避免其中包含 <code>\t</code> 或其他特殊字元破壞 JSON 格式。</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 取得必要資料</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> replyToken </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> items</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">events</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">replyToken</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> aiResponse </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">items</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">output</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">trim</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 如果沒有 replyToken 或 AI 回應，做基本錯誤處理</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">replyToken</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Missing reply token&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">aiResponse</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">json</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      replyToken</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">text</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;抱歉，我現在無法正確處理您的請求。請稍後再試。&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 回傳格式化後的資料</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">json</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replyToken</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">text</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> aiResponse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-5-呼叫-line-reply-api-回覆訊息">STEP 5. 呼叫 LINE Reply API 回覆訊息<a href="#step-5-呼叫-line-reply-api-回覆訊息" class="hash-link" aria-label="Direct link to STEP 5. 呼叫 LINE Reply API 回覆訊息" title="Direct link to STEP 5. 呼叫 LINE Reply API 回覆訊息">​</a></h3><ol><li>新增 <strong>HTTP Request Node</strong>，Method 選 <strong>POST</strong>，URL 設為 <code>https://api.line.me/v2/bot/message/reply</code>。  </li><li>在 Header 加上：<ul><li><code>Content-Type: application/json</code>  </li><li><code>Authorization: Bearer &lt;你的 Channel Access Token&gt;</code>  </li></ul></li><li>在 <strong>JSON Body</strong> 填入：<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;replyToken&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;{{ $json.replyToken }}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;messages&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;text&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;text&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> $json.text </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>這裡 <code>{{ $json.text }}</code> 即 Code Node 傳來的 AI 回應字串（已經被 JSON.stringify 包裹）。</li></ol><p>完成後，當使用者透過 LINE 傳訊息給你的 BOT，n8n 就會觸發流程並自動回應。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="兩個常見痛點與解法">兩個常見痛點與解法<a href="#兩個常見痛點與解法" class="hash-link" aria-label="Direct link to 兩個常見痛點與解法" title="Direct link to 兩個常見痛點與解法">​</a></h2><ol><li><p><strong>先用測試參數進行除錯</strong>  </p><ul><li>在製作這個流程時，常見的困擾是要同時取得 LINE 的 <code>replyToken</code> 與 AI 輸出。可以在沒有實際呼叫 LINE 的情況下，手動模擬 <code>replyToken</code> 與訊息文字作為測試資料，檢查整個 Workflow 邏輯是否正確。這樣可大幅縮短除錯時間。  </li></ul></li><li><p><strong>確保傳遞的 JSON 合法，使用 <code>JSON.stringify()</code></strong>  </p><ul><li>AI 產生的文字中，可能出現 <code>\t</code>、<code>\n</code>、<code>&quot;</code> 等特殊字元，若直接放入 JSON 字串會造成解析錯誤。  </li><li>建議在 Code Node 中，使用 <code>JSON.stringify(text)</code> 把回應包成一個合法的字串，再送到下一個節點，如此可避免因不合法字元導致的「JSON parameter needs to be valid JSON」錯誤。</li></ul></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="完整-workflow-json-參考">完整 Workflow JSON 參考<a href="#完整-workflow-json-參考" class="hash-link" aria-label="Direct link to 完整 Workflow JSON 參考" title="Direct link to 完整 Workflow JSON 參考">​</a></h2><p>可參考以下範例 (敏感資訊已移除)。<br>
<a href="https://github.com/your-repo/n8n-line-ai-demo" target="_blank" rel="noopener noreferrer">GitHub 範例連結 (Placeholder)</a></p><div class="language-jsonc codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsonc codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// （這裡省略示範，可參考實際上傳至 GitHub 的 JSON 檔） </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>請在匯入後，重新設定你的 <strong>OpenAI Key</strong>、<strong>LINE Channel Access Token</strong>、<strong>Webhook URL</strong> 等資訊。</p></blockquote><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="參考來源">參考來源<a href="#參考來源" class="hash-link" aria-label="Direct link to 參考來源" title="Direct link to 參考來源">​</a></h2><ul><li><a href="https://docs.n8n.io/" target="_blank" rel="noopener noreferrer">n8n 官方文件</a>  </li><li><a href="https://developers.line.biz/en/reference/messaging-api/" target="_blank" rel="noopener noreferrer">LINE Messaging API</a>  </li><li><a href="https://platform.openai.com/docs/introduction" target="_blank" rel="noopener noreferrer">OpenAI 官方文件</a>  </li></ul><p>透過以上步驟與注意事項，你就能在 <strong>n8n</strong> 上輕鬆打造結合 <strong>LINE BOT</strong> 與 <strong>AI</strong> 的智慧回應機器人，並成功避開在實務中最容易踩到的坑。祝你開發順利！</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/ai">AI</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/n-8-n">n8n</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/line">LINE</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/my-site/en/blog/使用 Whisper 離線完成聲音轉文字">使用 Whisper 離線完成聲音轉文字</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-12-17T20:00:00.000Z" itemprop="datePublished">December 17, 2023</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/willismax.png" alt="Willis Chen"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Willis Chen</span></a></div><small class="avatar__subtitle" itemprop="description">Tech Instructor</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><img loading="lazy" src="https://hackmd.io/_uploads/HJewmwhLT.png" alt="image" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="簡介">簡介<a href="#簡介" class="hash-link" aria-label="Direct link to 簡介" title="Direct link to 簡介">​</a></h2><p>Whisper 是一個高效能的聲音轉文字工具，由 Const-me 開發，基於 OpenAI 的 Whisper 自動語音識別（ASR）模型。這個工具主要是針對 Windows 平台開發，提供了一個高效且易於使用的介面來處理語音識別任務，重點是可以離線使用、速度快，專案網址為 <a href="https://github.com/Const-me/Whisper" target="_blank" rel="noopener noreferrer">https://github.com/Const-me/Whisper</a> ，以下介紹如何安裝與使用。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="快速開始指南">快速開始指南<a href="#快速開始指南" class="hash-link" aria-label="Direct link to 快速開始指南" title="Direct link to 快速開始指南">​</a></h2><p><img loading="lazy" src="https://hackmd.io/_uploads/Hkhd3LhUT.png" alt="image" class="img_ev3q"></p><ol><li><p><strong>下載和安裝</strong>：從 <a href="https://github.com/Const-me/Whisper" target="_blank" rel="noopener noreferrer">GitHub 存儲庫</a>的“<a href="https://github.com/Const-me/Whisper/releases" target="_blank" rel="noopener noreferrer">Releases</a>”部分下載 <code>WhisperDesktop.zip</code>，解壓縮，並運行 <code>WhisperDesktop.exe</code>。
<img loading="lazy" src="https://hackmd.io/_uploads/rkW23I3L6.png" alt="image" class="img_ev3q">
<img loading="lazy" src="https://hackmd.io/_uploads/ryJ-TL3L6.png" alt="image" class="img_ev3q"></p></li><li><p><strong>選擇模型</strong>：解壓縮啟動主程式(一個小花圖案)，系統會提示您下載一個模型。建議下載 <a href="https://huggingface.co/ggerganov/whisper.cpp/blob/main/ggml-medium.bin" target="_blank" rel="noopener noreferrer"><code>ggml-medium.bin</code></a>（大小為1.42GB），因為這是作者最常用於測試的模型。
<img loading="lazy" src="https://hackmd.io/_uploads/HJ8OTI2La.png" alt="image" class="img_ev3q">
<img loading="lazy" src="https://hackmd.io/_uploads/rklb0I3Ua.png" alt="image" class="img_ev3q">
<img loading="lazy" src="https://hackmd.io/_uploads/B1lQRL386.png" alt="image" class="img_ev3q"></p></li><li><p><strong>轉寫音頻文件</strong>：接下來的介面允許您選擇要轉寫的音頻文件。
<img loading="lazy" src="https://hackmd.io/_uploads/Hy8wR83Ip.png" alt="image" class="img_ev3q">
<img loading="lazy" src="https://hackmd.io/_uploads/BJsp0I3Ua.png" alt="image" class="img_ev3q">
中文可能是繁體或簡體。WebVTT subtitles檔案可以上傳至Youtube影片字幕(有時間軸)，視需要選用。</p></li></ol><ol start="7"><li><strong>即時轉譯</strong>：此外，還有一個介面可以捕獲並轉寫或翻譯來自麥克風的即時音訊。</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="主要特點">主要特點<a href="#主要特點" class="hash-link" aria-label="Direct link to 主要特點" title="Direct link to 主要特點">​</a></h2><ul><li><strong>廣泛的兼容性</strong>：基於 DirectCompute 技術，支持各種供應商的 GPU。</li><li><strong>效能優化</strong>：相較於 OpenAI 的實現，經過 C++ 編譯後的 Whisper 在轉寫速度上有明顯的提升。</li><li><strong>多格式音頻支持</strong>：支持大多數音頻和視訊格式，以及大部分在 Windows 上工作的音頻捕獲設備。</li><li><strong>低內存使用</strong>：相比於其他方案，使用的記憶體更少。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="系統要求">系統要求<a href="#系統要求" class="hash-link" aria-label="Direct link to 系統要求" title="Direct link to 系統要求">​</a></h2><ul><li><strong>平台支持</strong>：僅支持64位的 Windows 系統。理論上應該在 Windows 8.1 或更新的版本上運行，但開發者僅在 Windows 10 上進行了測試。</li><li><strong>硬體要求</strong>：需要一個支持 Direct3D 11.0 的 GPU，以及支持 AVX1 和 F16C 的 CPU。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="結語">結語<a href="#結語" class="hash-link" aria-label="Direct link to 結語" title="Direct link to 結語">​</a></h2><p>這個開源專案速度快、離線可用，而且對於隱私資料而言相對安全，可以幫助完成會議紀錄等任務，即便有錯誤也瑕不掩瑜，分享給有需要的各位。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/ai">AI</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/my-site/en/blog/如何使用 GitHub Codespace 建立並部署 LINE Bot">如何使用 GitHub Codespace 建立並部署 LINE Bot</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-12-15T10:00:00.000Z" itemprop="datePublished">December 15, 2023</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/willismax.png" alt="Willis Chen"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Willis Chen</span></a></div><small class="avatar__subtitle" itemprop="description">Tech Instructor</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><img loading="lazy" src="https://hackmd.io/_uploads/H16c3RFLT.png" alt="image" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="介紹">介紹<a href="#介紹" class="hash-link" aria-label="Direct link to 介紹" title="Direct link to 介紹">​</a></h3><p>在這篇文章中，我們將探討如何使用 <a href="https://github.com/features/codespaces" target="_blank" rel="noopener noreferrer">GitHub Codespace</a> 快速有效地建立和部署 LINE Bot。GitHub Codespace 提供了一個雲端開發環境，使得開發人員可以在任何地方進行開發和部署。這種方式的好處是不需要本地環境配置，且環境變數的設置增加了項目的安全性。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="步驟一設置-github-codespace">步驟一：設置 GitHub Codespace<a href="#步驟一設置-github-codespace" class="hash-link" aria-label="Direct link to 步驟一：設置 GitHub Codespace" title="Direct link to 步驟一：設置 GitHub Codespace">​</a></h3><p>首先，你需要在 GitHub 上啟用 Codespace 並克隆你的專案。</p><ol><li>登入你的 GitHub 帳號。</li><li>找到你的專案倉庫，點擊 &quot;Code&quot; 按鈕，選擇 &quot;Open with Codespaces&quot;。</li><li>選擇 &quot;New codespace&quot; 來建立一個新的開發環境。
<img loading="lazy" src="https://hackmd.io/_uploads/SJnIn_cIT.png" alt="image" class="img_ev3q"></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="步驟二設置環境變數">步驟二：設置環境變數<a href="#步驟二設置環境變數" class="hash-link" aria-label="Direct link to 步驟二：設置環境變數" title="Direct link to 步驟二：設置環境變數">​</a></h3><p>在 Codespace 中設置你的 LINE Bot 的環境變數：</p><ol><li><p>創建一個 <code>.env</code> 檔案。</p></li><li><p>加入以下環境變數：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">LINE_CHANNEL_SECRET=你的channel_secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LINE_CHANNEL_ACCESS_TOKEN=你的access_token </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>在這個<a href="https://github.com/willismax/MediaSystem-Python-Course" target="_blank" rel="noopener noreferrer">示範專案</a>，可以將<code>MediaSystem-Python-Course\06.Line-bot-fly-flask\</code>的<code>config-templete.py</code>另存為<code>config.py</code>，也就是環境變數儲存在<code>config.py</code>的檔案裡，這是一個簡易用法不建議正式使用，使用環境變數對機密資訊才有較佳的保護。</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="步驟三安裝依賴">步驟三：安裝依賴<a href="#步驟三安裝依賴" class="hash-link" aria-label="Direct link to 步驟三：安裝依賴" title="Direct link to 步驟三：安裝依賴">​</a></h3><p>在 Codespace 的終端機運行以下命令安裝所需依賴：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip install -r requirements.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="步驟四編輯程式碼">步驟四：編輯程式碼<a href="#步驟四編輯程式碼" class="hash-link" aria-label="Direct link to 步驟四：編輯程式碼" title="Direct link to 步驟四：編輯程式碼">​</a></h3><p>使用 GitHub Copilot 來協助編寫和優化程式碼。例如，以下是一個簡單的 Flask 應用來回應 LINE Bot 的訊息：</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> flask </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Flask</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> abort</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> linebot </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> LineBotApi</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> WebhookHandler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> linebot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">exceptions </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> InvalidSignatureError</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> linebot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">models </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> MessageEvent</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> TextMessage</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> TextSendMessage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Flask</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__name__</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">line_bot_api </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> LineBotApi</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;YOUR_CHANNEL_ACCESS_TOKEN&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">handler </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> WebhookHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;YOUR_CHANNEL_SECRET&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@app</span><span class="token decorator annotation punctuation" style="color:#393A34">.</span><span class="token decorator annotation punctuation" style="color:#393A34">route</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/callback&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> methods</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;POST&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    signature </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">headers</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;X-Line-Signature&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">as_text</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        handler</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">handle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">body</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> signature</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> InvalidSignatureError</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        abort</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">400</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;OK&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:#393A34">@handler</span><span class="token decorator annotation punctuation" style="color:#393A34">.</span><span class="token decorator annotation punctuation" style="color:#393A34">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">MessageEvent</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> message</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">TextMessage</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">handle_message</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">event</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    line_bot_api</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reply_message</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        event</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">reply_token</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> TextSendMessage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">event</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;__main__&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">` </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="步驟五測試與部署">步驟五：測試與部署<a href="#步驟五測試與部署" class="hash-link" aria-label="Direct link to 步驟五：測試與部署" title="Direct link to 步驟五：測試與部署">​</a></h3><p>啟動你的 Flask 應用並進行測試。你不需要使用 ngrok 來建立 TLS 認證。</p><ol><li>在 Codespace 的終端機運行你的 Flask 應用。</li><li>使用 LINE Bot 進行測試，確保一切運行正常。</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="結語">結語<a href="#結語" class="hash-link" aria-label="Direct link to 結語" title="Direct link to 結語">​</a></h3><p>使用 GitHub Codespace 來建立和部署 LINE Bot 是一個高效且安全的方法。這種方式不僅節省了設置本地開發環境的時間，還提供了一個穩定和安全的開發平台。希望這篇文章能夠幫助你順利完成 LINE Bot 的開發和部署。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/python">python</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/my-site/en/blog/Customize Your AI Teaching Assistant - A Socratic Approach">🤖 客製化你的AI教學助手-蘇格拉底引導教學法</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-10-10T10:00:00.000Z" itemprop="datePublished">October 10, 2023</time> · <!-- -->9 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/willismax.png" alt="Willis Chen"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Willis Chen</span></a></div><small class="avatar__subtitle" itemprop="description">Tech Instructor</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><img loading="lazy" src="https://hackmd.io/_uploads/SyD7wOz-p.png" class="img_ev3q"></p><p>老師們現在不僅對教學充滿熱情，也愈來愈善於運用科技工具，如LINE官方帳號，來與學生和家長保持緊密的溝通。這些努力無疑是朝著以下兩大目標邁進：</p><ol><li><strong>激發學生的好奇心</strong>：鼓勵學生主動提問，並引導他們思考解決問題的方法。</li><li><strong>個別化教學</strong>：深入了解每位學生的學習進度和思維方式，以因材施教。</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-專案介紹">🤖 專案介紹<a href="#-專案介紹" class="hash-link" aria-label="Direct link to 🤖 專案介紹" title="Direct link to 🤖 專案介紹">​</a></h2><p>這個專案的核心目的是要讓老師們能在已有的LINE官方帳號上，快速加入一個AI助教—使用ChatGPT技術。這樣一來，AI助教能夠第一時間回應學生的問題，如果遇到AI不能解決的問題，它還會建議學生直接聯繫老師。這讓老師有更多的時間和空間來專注於其他重要的教學任務。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="️-如何開始">🛠️ 如何開始？<a href="#️-如何開始" class="hash-link" aria-label="Direct link to 🛠️ 如何開始？" title="Direct link to 🛠️ 如何開始？">​</a></h2><p>這個專案極力降低相關的技術門檻。實際上，在<strong>幾乎不需要寫任何程式碼</strong>的情況下，老師就能設置起這個AI助教服務。你只需完成以下幾個簡單的步驟：</p><ol><li>註冊本服務</li><li>在LINE官方帳號後台進行相應設定</li><li>啟用ChatGPT作為你的AI助教</li></ol><p>完成以上步驟後，你就能讓ChatGPT開始擔任你的AI助教，預先回答學生的問題。</p><p>👉 <strong>歡迎各位老師運用，打造更智慧、更高效、教學相長的教學環境！</strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-在開始之前你需要了解的">📚 在開始之前，你需要了解的<a href="#-在開始之前你需要了解的" class="hash-link" aria-label="Direct link to 📚 在開始之前，你需要了解的" title="Direct link to 📚 在開始之前，你需要了解的">​</a></h2><p>在你開始使用這個專案之前，有一些基礎的技術和費用信息你需要知道。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="技術環境">技術環境<a href="#技術環境" class="hash-link" aria-label="Direct link to 技術環境" title="Direct link to 技術環境">​</a></h3><ul><li><strong>涉及的技術和環境如下：</strong><ul><li><strong>程式語言</strong>: Python</li><li><strong>伺服器後端框架</strong>: Flask</li><li><strong>FaaS雲端服務</strong>: Vercel</li><li><strong>AI對話功能</strong>: OpenAI API (ChatGPT-3.5-tubo)</li><li><strong>聊天環境</strong>: LINE (LINE Message API)</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="花費預估">花費預估<a href="#花費預估" class="hash-link" aria-label="Direct link to 花費預估" title="Direct link to 花費預估">​</a></h3><ul><li><p><strong>Vercel</strong></p><ul><li>Hobby方案允許你免費建立最多3個專案。</li><li>注意：如果伺服器處理時間超過10秒，將會被判定為Time Out。</li><li><a href="https://vercel.com/pricing" target="_blank" rel="noopener noreferrer">Vercel 費用詳情</a></li></ul></li><li><p><strong>OpenAI API</strong></p><ul><li>初次註冊有免費額度，API使用需綁信用卡。</li><li>本專案預設使用的是2023/11釋出的 <strong>GPT-4-1106-preview</strong>。</li><li><a href="https://openai.com/pricing" target="_blank" rel="noopener noreferrer">OpenAI 費用詳情</a></li><li><img loading="lazy" src="https://hackmd.io/_uploads/rJE3dzfWp.png" alt="OpenAI Cost" class="img_ev3q"></li></ul></li><li><p><strong>LINE 主動訊息</strong></p><ul><li>額度內免費，目前是200則訊息（2023/9月前為500則）。</li><li>由使用者提問的回覆（Reply）免費。</li><li>老師主動發送的訊息（Push）有200則限制。</li><li><a href="https://tw.linebiz.com/column/LINEOA-2023-Price-Plan/" target="_blank" rel="noopener noreferrer">LINE 費用詳情</a></li><li><img loading="lazy" src="https://hackmd.io/_uploads/B1OZhGfbT.png" alt="LINE Cost1" class="img_ev3q"></li><li><img loading="lazy" src="https://hackmd.io/_uploads/BkA86fGWa.png" alt="LINE Cost2" class="img_ev3q"></li></ul><blockquote><p><strong>提醒您</strong>: 所有的費用和限制可能會隨著各個服務供應商的政策改變而變動，建議定期查看官方網站以獲取最新資訊。</p></blockquote></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="如何建立自己的-line-ai助教">如何建立自己的 LINE AI助教？<a href="#如何建立自己的-line-ai助教" class="hash-link" aria-label="Direct link to 如何建立自己的 LINE AI助教？" title="Direct link to 如何建立自己的 LINE AI助教？">​</a></h2><p>這份指南將引領您從<a href="https://tw.linebiz.com/login/" target="_blank" rel="noopener noreferrer">LINE 官方帳號</a>開始，不同於開發者通常從 <a href="https://developers.line.biz/zh-hant/" target="_blank" rel="noopener noreferrer">LINE Developers</a> 開始。不過，不管從哪裡出發，最終目標相同：建立一個集成 ChatGPT 的 LINE 官方帳號。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-步驟1初始化-line-官方帳號-">🌟 步驟1：初始化 LINE 官方帳號 🌟<a href="#-步驟1初始化-line-官方帳號-" class="hash-link" aria-label="Direct link to 🌟 步驟1：初始化 LINE 官方帳號 🌟" title="Direct link to 🌟 步驟1：初始化 LINE 官方帳號 🌟">​</a></h3><p>首先，我們需要建立一個基本的、無AI功能的 LINE 官方帳號。學生們可以即刻加入這個帳號。這個帳號初期僅支持手動聊天，AI 功能將在後續逐步加入。</p><ol><li><p><strong>前往 <a href="https://tw.linebiz.com/login/" target="_blank" rel="noopener noreferrer">LINE 官方帳號管理頁面</a></strong> <img loading="lazy" src="https://hackmd.io/_uploads/HJlzbqZ-a.png" class="img_ev3q"></p></li><li><p><strong>填寫必要資訊</strong>：這些資訊也會是學生看到的名稱。 <img loading="lazy" src="https://hackmd.io/_uploads/r1ecWq-bT.png" class="img_ev3q"></p></li><li><p><strong>選擇「稍後認證官方帳號」</strong>：這個認證過程不會影響本專案。 <img loading="lazy" src="https://hackmd.io/_uploads/B1Z1M9ZWT.png" class="img_ev3q"></p></li><li><p><strong>（選擇性）建立圖文選單</strong>：利用圖文選單可提供班級公告、相片集等。</p><ul><li>主頁 &gt; 圖文選單 <!-- -->&gt;<!-- --> 參考說明 <img loading="lazy" src="https://hackmd.io/_uploads/Skzdd9W-T.png" class="img_ev3q"></li></ul></li><li><p><strong>啟用 Webhook</strong> 🔗</p><ul><li>Webhook 是一個可用程式處理訊息的通道。</li><li>通過 Webhook，我們將使用 Vercel 平台、Python Flask 框架和 OpenAI API。 <img loading="lazy" src="https://hackmd.io/_uploads/ByQOHc-W6.png" class="img_ev3q"></li></ul></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-步驟2註冊必要的平台並獲取-api-token">🌟 步驟2：註冊必要的平台並獲取 API Token<a href="#-步驟2註冊必要的平台並獲取-api-token" class="hash-link" aria-label="Direct link to 🌟 步驟2：註冊必要的平台並獲取 API Token" title="Direct link to 🌟 步驟2：註冊必要的平台並獲取 API Token">​</a></h3><ol><li><strong>註冊必要平台</strong>：包括 <a href="https://github.com/" target="_blank" rel="noopener noreferrer">GitHub</a>、<a href="https://vercel.com/" target="_blank" rel="noopener noreferrer">Vercel</a>、<a href="https://openai.com/blog/openai-api" target="_blank" rel="noopener noreferrer">OpenAI API</a>、<a href="https://developers.line.biz/zh-hant/" target="_blank" rel="noopener noreferrer">LINE Developers</a>。</li><li><strong>獲取 OpenAI API Token</strong>：保存好這個 Token，它是一次性的。 <img loading="lazy" src="https://hackmd.io/_uploads/SJFdUYbWT.png" class="img_ev3q"></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-步驟3設置-line-developer-channel-及獲取-secret-token-">🌟 步驟3：設置 LINE Developer Channel 及獲取 Secret, Token 🌟<a href="#-步驟3設置-line-developer-channel-及獲取-secret-token-" class="hash-link" aria-label="Direct link to 🌟 步驟3：設置 LINE Developer Channel 及獲取 Secret, Token 🌟" title="Direct link to 🌟 步驟3：設置 LINE Developer Channel 及獲取 Secret, Token 🌟">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="31-獲取-channel-secret-">3.1 獲取 <code>Channel Secret</code> 🔒<a href="#31-獲取-channel-secret-" class="hash-link" aria-label="Direct link to 31-獲取-channel-secret-" title="Direct link to 31-獲取-channel-secret-">​</a></h4><ul><li>從 LINE 官方帳號或 LINE Developer Channel 都可獲取。 <img loading="lazy" src="https://hackmd.io/_uploads/ByaIpoWWT.png" class="img_ev3q"></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="32-獲取-channel-access-token-">3.2 獲取 <code>Channel Access Token</code> 🔑<a href="#32-獲取-channel-access-token-" class="hash-link" aria-label="Direct link to 32-獲取-channel-access-token-" title="Direct link to 32-獲取-channel-access-token-">​</a></h4><ul><li>在 LINE Developer Channel 下生成。 <img loading="lazy" src="https://hackmd.io/_uploads/S1NO13WZT.png" class="img_ev3q"></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-步驟4fork-github-專案-">🌟 步驟4：Fork GitHub 專案 🌟<a href="#-步驟4fork-github-專案-" class="hash-link" aria-label="Direct link to 🌟 步驟4：Fork GitHub 專案 🌟" title="Direct link to 🌟 步驟4：Fork GitHub 專案 🌟">​</a></h3><ul><li>Fork 這個專案至您自己的 GitHub 儲存庫。 <img loading="lazy" src="https://hackmd.io/_uploads/H18PEQfb6.png" class="img_ev3q"></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-步驟5部署至-vercel-">🌟 步驟5：部署至 Vercel 🌟<a href="#-步驟5部署至-vercel-" class="hash-link" aria-label="Direct link to 🌟 步驟5：部署至 Vercel 🌟" title="Direct link to 🌟 步驟5：部署至 Vercel 🌟">​</a></h3><ol><li><strong>建立 Vercel 專案</strong> <img loading="lazy" src="https://hackmd.io/_uploads/BJo573bZ6.png" class="img_ev3q"></li><li><strong>連接 GitHub 和選擇專案</strong> <img loading="lazy" src="https://hackmd.io/_uploads/B1paQ2W-a.png" class="img_ev3q"></li><li><strong>設定環境變數並部署</strong></li></ol><ul><li><p>您需要設定的環境變數為<code>OPENAI_API_KEY</code>、<code>LINE_CHANNEL_ACCESS_TOKEN</code>及<code>LINE_CHANNEL_SECRET</code>，在這裡的環境變數能受到較佳的保護，至少比放在程式碼裡安全許多。</p><p><img loading="lazy" src="https://hackmd.io/_uploads/SyAIBh-bT.png" class="img_ev3q"></p></li></ul><ol start="4"><li><strong>修正支援的Nodejs版本</strong></li></ol><ul><li><p>如果遇到Python安裝版本問題，依據<a href="https://vercel.com/docs/functions/runtimes/node-js" target="_blank" rel="noopener noreferrer">官方文件</a>，Vercel預設的Node.js版本為20.x，不支援Python，請在專案的設定&gt;一般的選項裡，將Node.js改選為18.x版本。
<img loading="lazy" src="https://hackmd.io/_uploads/B1l6daTgC.png" alt="image" class="img_ev3q"></p></li><li><p>修改後請選擇部署，或到專案的佈署歷程中選擇再次部署，就會改用Node.js 18.x版再跑一次。
<img loading="lazy" src="https://hackmd.io/_uploads/ryUT9aTx0.png" alt="image" class="img_ev3q"></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-完成-">🎉 完成！ 🎉<a href="#-完成-" class="hash-link" aria-label="Direct link to 🎉 完成！ 🎉" title="Direct link to 🎉 完成！ 🎉">​</a></h3><p>恭喜您，現在您已經成功建立了自己的 AI 助教！現在可以透過 LINE 官方帳號進行測試。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-進階設定打造個性化的ai助手">🔧 進階設定：打造個性化的AI助手<a href="#-進階設定打造個性化的ai助手" class="hash-link" aria-label="Direct link to 🔧 進階設定：打造個性化的AI助手" title="Direct link to 🔧 進階設定：打造個性化的AI助手">​</a></h3><ul><li>若要讓AI助手更符合你的需求和風格，OpenAI API提供了一個彈性的方式讓你自行設定AI的角色。具體來說，你只需要在對話設定中添加 <code>messages: [{ role: &quot;system&quot;, content: &quot;你的AI助手人設&quot; }]</code> 即可。</li><li>進行這項設定只需前往<code>api/prompt.py</code>並在<code>AI_GUIDELINES</code>後修改提示文字即可。不過，因為Vercel的免費版有10秒的運行時限制，過長的提示可能會導致Time Out，因此建議不要設置過於複雜的指引。</li><li>本專案經過精心測試後，已經內建一組最佳實踐的<code>AI_GUIDELINES</code>，但你也可以隨心所欲地進行調整：<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">AI_GUIDELINES = &#x27;你是一個AI助教，專門使用蘇格拉底教學法來回答學生的問題，如果有需要，會建議學生與老師進一步確認。&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>修改方式也非常簡單，只需登入你的GitHub帳號，找到該專案的<code>api/prompt.py</code>文件，點擊右側的鋼筆圖示✏️即可進行線上編輯。 <img loading="lazy" src="https://hackmd.io/_uploads/SynC3QMZT.png" alt="編輯" class="img_ev3q"></li><li>完成後，選擇“Commit Changes”並填入適當的描述。 <img loading="lazy" src="https://hackmd.io/_uploads/rkIFpXG-6.png" alt="提交更改" class="img_ev3q"> <img loading="lazy" src="https://hackmd.io/_uploads/rJQC6mMWT.png" alt="描述" class="img_ev3q"></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-專案成果">🚀 專案成果<a href="#-專案成果" class="hash-link" aria-label="Direct link to 🚀 專案成果" title="Direct link to 🚀 專案成果">​</a></h3><ul><li><p><strong>出色的問答回應</strong>: 這個AI助手自2023年11月7日OpenAI大幅降低費率後，採用GPT 4模型，更能通順的、即時地回應學生的問題。 <img loading="lazy" src="https://hackmd.io/_uploads/ryjveAW-T.png" alt="出色回應" class="img_ev3q"></p></li><li><p><strong>問題過濾</strong>: 對於需要更深層次討論的問題，AI助手會提供適當的處理建議，協助老師過濾和分類問題，同時也啟發老師改進教學。 <img loading="lazy" src="https://hackmd.io/_uploads/SkaDCWzbp.png" alt="問題過濾" class="img_ev3q"></p></li><li><p><strong>引導學生思考</strong>: 透過蘇格拉底教學法，AI助手不僅回答問題，還能引導學生學會如何提問和解決問題。 </p><div class="language-=! codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-=! codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">同學A 老師我想要問BMI的python程式怎麼寫</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AI助教  嗨！關於BMI的Python程式，我可以幫你一起思考。首先，你知道BMI是什麼嗎？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">同學A BMI=體重/身高平方</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AI助教  沒錯！BMI是體重除以身高的平方。那麼，你想要寫一個計算BMI的Python程式對吧？你已經有身高和體重的數值了嗎？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">同學A 70/(1.73**2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AI助教  沒錯！你可以使用這個公式來計算BMI。現在我們可以開始寫一個Python程式來計算BMI。你想要將身高和體重作為變數輸入嗎？</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">同學A 想</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AI助教  好的！我們可以寫一個簡單的Python函數來計算BMI。以下是一個範例程式碼：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ```python</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def calculate_bmi(weight, height):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bmi = weight / (height ** 2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return bmi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    weight = float(input(&quot;請輸入您的體重（公斤）：&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    height = float(input(&quot;請輸入您的身高（公尺）：&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bmi = calculate_bmi(weight, height)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(&quot;您的BMI為：&quot;, bmi)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">這個程式會要求使用者輸入體重和身高，然後使用`calculate_bmi`函數計算BMI並輸出結果。請注意，身高的單位應該是公尺，體重的單位應該是公斤。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">同學A 請幫我也寫出測試碼，之後會用pytest測試</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AI助教  當然！我們可以寫一些測試碼來驗證我們的BMI計算函數是否正確。以下是一個範例的測試碼：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ```python</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    import pytest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def calculate_bmi(weight, height):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bmi = weight / (height ** 2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return bmi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def test_calculate_bmi():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert calculate_bmi(70, 1.73) == pytest.approx(23.39, 0.01)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert calculate_bmi(80, 1.65) == pytest.approx(29.38, 0.01)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert calculate_bmi(60, 1.80) == pytest.approx(18.52, 0.01)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if __name__ == &quot;__main__&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pytest.main()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">這個測試碼使用了pytest套件來執行測試。我們定義了一個`test_calculate_bmi`函數，其中包含了幾個斷言語句，用來驗證`calculate_bmi`函數的輸出是否符合預期。每個斷言語句都使用了`pytest.approx`函數來比較浮點數的近似值，並指定了一個容忍誤差範圍。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">你可以將這個測試碼保存為一個.py檔案，然後使用pytest運行測試。如果所有的測試通過，則表示你的BMI計算函數正確無誤。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">同學A 謝謝老師，我的超人</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AI助教  不客氣！如果你有任何其他問題，隨時都可以問我。祝你一切順利！</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="https://hackmd.io/_uploads/ryjTiWfZT.png" alt="培養思考" class="img_ev3q"> <img loading="lazy" src="https://hackmd.io/_uploads/HkZ1nWzbp.png" alt="成果展示" class="img_ev3q"> <img loading="lazy" src="https://hackmd.io/_uploads/Byyf2bGWp.png" alt="更多示例" class="img_ev3q"></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="專案成果">專案成果<a href="#專案成果" class="hash-link" aria-label="Direct link to 專案成果" title="Direct link to 專案成果">​</a></h2><ol><li><strong>出色的回應學生問題</strong>: 這個功能不僅可以即時解答學生的問題，還可以減輕老師的負擔。</li><li><strong>過濾問題</strong>: 能過濾並指導學生如何更有效地提問，是一個對教師非常有幫助的功能。</li><li><strong>引導學生思考</strong>: 這是最讓人印象深刻的部分，因為不僅解答了問題，還教會了學生如何解決問題。</li></ol><p>這個專案不僅具有高度的實用性，也很有教育意義。它不只是一個問答工具，更是一個能夠協助教學和學習的平台。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="參考資料">參考資料<a href="#參考資料" class="hash-link" aria-label="Direct link to 參考資料" title="Direct link to 參考資料">​</a></h2><ul><li><a href="https://beta.openai.com/docs/" target="_blank" rel="noopener noreferrer">GPT-3 API 官方文件</a></li><li><a href="https://vercel.com/docs" target="_blank" rel="noopener noreferrer">Vercel 官方文件</a></li><li><a href="https://docs.github.com/en/github/managing-files-in-a-repository/editing-files-in-your-repository" target="_blank" rel="noopener noreferrer">GitHub 如何編輯文件</a></li><li><a href="https://github.com/willismax/LLM-LINEBot-use-python-on-vercel" target="_blank" rel="noopener noreferrer">本專案GitHub Repo</a>，Forked &amp; Modified from <a href="https://github.com/howarder3/GPT-Linebot-python-flask-on-vercel" target="_blank" rel="noopener noreferrer">howarder3</a></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/python">python</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/chat-gpt">ChatGPT</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/linebot">LINEBOT</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/my-site/en/blog/Python 虛擬環境管理 - pipenv 與 venv 比較">Python 虛擬環境管理 - pipenv 與 venv 比較</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-09-23T10:00:00.000Z" itemprop="datePublished">September 23, 2023</time> · <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/willismax.png" alt="Willis Chen"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Willis Chen</span></a></div><small class="avatar__subtitle" itemprop="description">Tech Instructor</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>🐍 Python 是一種非常流行和強大的程式語言，它有許多優秀的套件可以幫助我們完成各種任務，例如資料分析、機器學習、網頁開發等。然而，如果我們同時在不同的專案中使用 Python，我們可能會遇到一些問題，例如：</p><ul><li>不同的專案可能需要不同的 Python 版本或套件版本，這可能會造成版本衝突和相依性問題。</li><li>如果我們在全域環境中安裝或移除套件，可能會影響其他專案的運作。</li><li>如果我們想要部署或分享我們的專案，我們需要記錄和安裝所有需要的套件和版本，這可能會很麻煩和耗時。</li></ul><p>為了解決這些問題，我們可以使用虛擬環境管理工具來創建和管理不同的 Python 環境。虛擬環境是一個隔離的 Python 環境，它可以讓我們在不同的專案中使用不同的 Python 版本和套件，而不會互相干擾。這樣，我們就可以更方便和安全地開發和部署我們的 Python 專案。</p><p>目前，有許多虛擬環境管理工具可以選擇，例如 virtualenv, conda, pyenv 等。在這篇文章中，我將重點介紹 pipenv 和 venv 這兩種工具，並且比較它們的優缺點。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pipenv">pipenv<a href="#pipenv" class="hash-link" aria-label="Direct link to pipenv" title="Direct link to pipenv">​</a></h2><ul><li>pipenv 是目前 Python 官方推薦的套件管理工具，它集成了 <code>pip</code> 和 <code>virtualenv</code> 的功能，並且改進了它們的一些缺陷 。</li><li>pip 使用 <code>Pipfile</code> 和 <code>Pipfile.lock</code> 來記錄套件的資訊，而不是使用 requirements.txt。<ul><li>Pipfile.lock 包含了套件的Hash值，可以確保安裝的套件是一致和安全的 。</li><li>pipenv 可以自動產生和更新 <code>Pipfile</code> 和 <code>Pipfile.lock</code>，不需要手動維護 。</li></ul></li><li>可以區分開發和生產環境的套件，只需要在安裝時加上 --dev 參數即可 。</li><li>可並行（parallel）同步安裝套件，提升安裝速度。</li><li>pipenv 可以透過 <code>.env</code> 自動載入不同環境變數。</li><li>pipenv 的指令比較簡單和直觀，例如 <ul><li><code>pipenv install</code> 如同 <code>pip install</code></li><li><code>pipenv uninstall</code></li><li><code>pipenv shell</code> 如同 <code>source venv/bin/activate</code>  進入虛擬環。</li><li><code>pipenv run</code> 可以執行虛擬環境內容</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="venv">venv<a href="#venv" class="hash-link" aria-label="Direct link to venv" title="Direct link to venv">​</a></h2><ul><li>venv 是 Python 3.3 之後內建的虛擬環境模組，它可以創建一個隔離的 Python 環境，但是不包含任何套件管理功能。</li><li>venv 使用 <code>python -m venv {虛擬機命名}</code> 來創建虛擬環境，然後使用 <code>source venv/bin/activate</code> 來啟動虛擬環境(Windows 以 <code>venv/Scripts/activate</code> 進入)。</li><li>venv 需要配合 <code>pip</code> 和 <code>requirements.txt</code> 來管理套件，因為venv跟pip是兩回事，這可能會造成版本衝突和相依性問題。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="比較-pipenv-和-venv-差異">比較 pipenv 和 venv 差異<a href="#比較-pipenv-和-venv-差異" class="hash-link" aria-label="Direct link to 比較 pipenv 和 venv 差異" title="Direct link to 比較 pipenv 和 venv 差異">​</a></h2><p>以下用表格比較 pipenv 和 venv 的差異，我用表格的方式來比較它們的特點：</p><table><thead><tr><th>特點</th><th>pipenv</th><th>venv</th></tr></thead><tbody><tr><td>Python 官方推薦</td><td>是</td><td>曾經是</td></tr><tr><td>集成 pip 和 virtualenv</td><td>是</td><td>否</td></tr><tr><td>使用 Pipfile 和 Pipfile.lock</td><td>是</td><td>否</td></tr><tr><td>自動產生和更新 Pipfile 和 Pipfile.lock</td><td>是</td><td>否</td></tr><tr><td>包含套件的哈希值</td><td>是</td><td>否</td></tr><tr><td>區分開發和生產環境的套件</td><td>是</td><td>否</td></tr><tr><td>使用並行同步安裝套件</td><td>是</td><td>否</td></tr><tr><td>自動載入不同環境變數</td><td>是</td><td>否</td></tr><tr><td>指令簡單和直觀</td><td>是</td><td>否</td></tr></tbody></table><p>從表格中，我們可以看出 pipenv 是一個更先進和完善的虛擬環境管理工具，它可以讓我們更方便和安全地開發 Python 專案。如果你想了解更多關於 pipenv 的資訊，但在基礎Python教學時，我更傾向以venv為主，因為你看到的網路專案大多還是<code>venv</code> + <code>pip install -r requirements.txt</code> 來示範的。可以參考以下的連結：</p><ul><li><a href="https://pipenv.pypa.io/en/latest/" target="_blank" rel="noopener noreferrer">Pipenv 官方文件</a></li><li><a href="https://segmentfault.com/a/1190000015389565" target="_blank" rel="noopener noreferrer">Pipenv 更簡單、更快速的 Python 套件管理工具</a></li><li><a href="https://stackoverflow.com/questions/67065725/conda-env-vs-venv-pyenv-virtualenv-etc" target="_blank" rel="noopener noreferrer">Pipenv vs Virtualenv vs Conda environment</a></li></ul><p>感謝你閱讀這篇文章，如果你有任何問題或建議，歡迎在下方留言。Enjoy Python。再見！</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/python">python</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/my-site/en/blog/在 Render 上快速部署 HackMD 與 LINE 的聊天機器人">在 Render 上快速部署 HackMD 與 LINE 的聊天機器人</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-09-10T12:00:00.000Z" itemprop="datePublished">September 10, 2023</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/willismax.png" alt="Willis Chen"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Willis Chen</span></a></div><small class="avatar__subtitle" itemprop="description">Tech Instructor</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>如果你對如何將 LINE 聊天機器人與 HackMD 結合有興趣，這篇文章正是你需要的。這次，我們將使用 Render 這個雲端平台來部署我們的應用。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="前置作業準備你的-github-倉庫">前置作業：準備你的 GitHub 倉庫<a href="#前置作業準備你的-github-倉庫" class="hash-link" aria-label="Direct link to 前置作業：準備你的 GitHub 倉庫" title="Direct link to 前置作業：準備你的 GitHub 倉庫">​</a></h2><ol><li><p><strong>Fork 專案</strong>：首先，請到這個 <a href="https://github.com/willismax/AI-LINE-2-HACKMD" target="_blank" rel="noopener noreferrer">GitHub Repo</a> 進行 fork，這樣你就有了一個屬於自己的副本。</p><p><img loading="lazy" src="https://hackmd.io/_uploads/Sk3T8G2P3.png" alt="Fork Repo" class="img_ev3q"></p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="render-設定">Render 設定<a href="#render-設定" class="hash-link" aria-label="Direct link to Render 設定" title="Direct link to Render 設定">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="登入和選擇服務">登入和選擇服務<a href="#登入和選擇服務" class="hash-link" aria-label="Direct link to 登入和選擇服務" title="Direct link to 登入和選擇服務">​</a></h3><ol><li><p><strong>登入 Render</strong>：前往 <a href="https://dashboard.render.com/" target="_blank" rel="noopener noreferrer">Render 的網站</a> 並用 GitHub 帳號登入。</p><p><img loading="lazy" src="https://hackmd.io/_uploads/SyRlvMhP2.png" alt="登入 Render" class="img_ev3q"></p></li><li><p><strong>選擇 Web 服務</strong>：在 Render 的 dashboard，選擇 &quot;Web Service&quot;。</p><p><img loading="lazy" src="https://hackmd.io/_uploads/H1euBG3Dh.png" alt="選擇 Web Service" class="img_ev3q"></p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="設定部署參數">設定部署參數<a href="#設定部署參數" class="hash-link" aria-label="Direct link to 設定部署參數" title="Direct link to 設定部署參數">​</a></h3><ol><li><p><strong>基本設定</strong>：填入應用的名稱和其他基本資訊。在這裡，我們選擇免費的方案。如果你的主程式檔名不是 <code>app.py</code>，記得修改 gunicorn 的指令。</p><p><img loading="lazy" src="https://hackmd.io/_uploads/H1vOwG3P2.png" alt="基本設定" class="img_ev3q"> <img loading="lazy" src="https://hackmd.io/_uploads/HyK2vG3Ph.png" alt="更多設定" class="img_ev3q"></p></li><li><p><strong>設定環境變數</strong>：在 <code>.env</code> 檔案中填入所有需要的環境變數。</p><p><img loading="lazy" src="https://hackmd.io/_uploads/rJsmy73v3.png" alt="環境變數設定" class="img_ev3q"></p></li><li><p><strong>等待部署完成</strong>：設定完成後，Render 會自動進行部署。</p><p><img loading="lazy" src="https://hackmd.io/_uploads/Sym_k72wh.png" alt="部署狀態" class="img_ev3q"></p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="需要的-api-金鑰和資訊">需要的 API 金鑰和資訊<a href="#需要的-api-金鑰和資訊" class="hash-link" aria-label="Direct link to 需要的 API 金鑰和資訊" title="Direct link to 需要的 API 金鑰和資訊">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hackmd-api">HackMD API<a href="#hackmd-api" class="hash-link" aria-label="Direct link to HackMD API" title="Direct link to HackMD API">​</a></h3><ul><li>請參考 HackMD 的官方文件以獲得 API 金鑰。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="openai-api">OpenAI API<a href="#openai-api" class="hash-link" aria-label="Direct link to OpenAI API" title="Direct link to OpenAI API">​</a></h3><ol><li><p>訪問 <a href="https://openai.com/blog/openai-api" target="_blank" rel="noopener noreferrer">OpenAI API 官網</a>。</p></li><li><p>生成一個一次性的 API 金鑰。注意：一旦關閉視窗，這個金鑰將不再顯示。</p><p><img loading="lazy" src="https://hackmd.io/_uploads/ByovFm3P2.png" alt="OpenAI API" class="img_ev3q"> <img loading="lazy" src="https://hackmd.io/_uploads/B1QTtXhD2.png" alt="API 金鑰" class="img_ev3q"></p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="line-message-api-和-imgur-api">LINE Message API 和 Imgur API<a href="#line-message-api-和-imgur-api" class="hash-link" aria-label="Direct link to LINE Message API 和 Imgur API" title="Direct link to LINE Message API 和 Imgur API">​</a></h3><ul><li>請依照各自平台的文件申請 API 金鑰。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="環境變數在-python-中的使用">環境變數在 Python 中的使用<a href="#環境變數在-python-中的使用" class="hash-link" aria-label="Direct link to 環境變數在 Python 中的使用" title="Direct link to 環境變數在 Python 中的使用">​</a></h2><p>你可以使用以下程式碼來讀取環境變數。</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">api_key </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">environ</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;KEY&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">`</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="配置-line-webhook">配置 LINE Webhook<a href="#配置-line-webhook" class="hash-link" aria-label="Direct link to 配置 LINE Webhook" title="Direct link to 配置 LINE Webhook">​</a></h2><p>最後，回到 LINE Channel 設定中加入 webhook。</p><p><img loading="lazy" src="https://hackmd.io/_uploads/HJxHy93v3.png" alt="LINE Webhook" class="img_ev3q"></p><p>這樣你就完成了整個部署過程！如果你有任何問題或建議，歡迎在下方留言。祝學習愉快！</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/line">LINE</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/hackmd">Hackmd</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/python">python</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/my-site/en/blog/使用 LM Studio 輕鬆在筆電上建立自己的聊天機器人">使用 LM Studio 輕鬆在筆電上建立自己的聊天機器人</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-09-09T21:00:00.000Z" itemprop="datePublished">September 9, 2023</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/willismax.png" alt="Willis Chen"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Willis Chen</span></a></div><small class="avatar__subtitle" itemprop="description">Tech Instructor</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>對於剛接觸人工智慧的學生來說，建立自己的聊天機器人可能聽起來有點遙不可及。不過，現在有越來越多的工具讓這個過程變得簡單。本篇文章會介紹如何使用 LM Studio 快速在筆電上實現大型語言模型（LLM）。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="背景知識大型語言模型與開源社群">背景知識：大型語言模型與開源社群<a href="#背景知識大型語言模型與開源社群" class="hash-link" aria-label="Direct link to 背景知識：大型語言模型與開源社群" title="Direct link to 背景知識：大型語言模型與開源社群">​</a></h2><p>在開始之前，讓我們先簡單了解一下什麼是大型語言模型。簡單來說，它是一種能夠理解和生成人類語言的人工智慧模型。目前有很多開源的大型語言模型，像是 Meta 的 LLaMa 系列和 Hugging Face（簡稱 HF）的各種模型。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="步驟-1安裝-lm-studio-應用程式">步驟 1：安裝 LM Studio 應用程式<a href="#步驟-1安裝-lm-studio-應用程式" class="hash-link" aria-label="Direct link to 步驟 1：安裝 LM Studio 應用程式" title="Direct link to 步驟 1：安裝 LM Studio 應用程式">​</a></h2><p>首先，請至 <a href="https://lmstudio.ai/" target="_blank" rel="noopener noreferrer">LM Studio 官網</a> 下載適用於 Windows 或 Mac 的桌面應用程式。</p><p><img loading="lazy" src="https://hackmd.io/_uploads/rkezQzgcR2.png" alt="LM Studio 下載頁面" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="步驟-2選擇適合的模型">步驟 2：選擇適合的模型<a href="#步驟-2選擇適合的模型" class="hash-link" aria-label="Direct link to 步驟 2：選擇適合的模型" title="Direct link to 步驟 2：選擇適合的模型">​</a></h2><p>安裝完畢後，打開 LM Studio。在首頁，你會看到最新或最熱門的模型資訊。使用搜尋框可以找到你需要的模型。例如，我搜尋 &quot;Taiwan&quot;，找到了一個名為 <code>audreyt/Taiwan-LLaMa-v1.0-GGUF</code> 的模型。</p><p><img loading="lazy" src="https://hackmd.io/_uploads/rkyqMecA2.png" alt="模型選擇" class="img_ev3q"></p><blockquote><p><strong>備註：</strong> 模型資訊通常會包含在 HF 的模型卡（Model Card）和相關的論文連結。</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="步驟-3下載模型到本地">步驟 3：下載模型到本地<a href="#步驟-3下載模型到本地" class="hash-link" aria-label="Direct link to 步驟 3：下載模型到本地" title="Direct link to 步驟 3：下載模型到本地">​</a></h2><p>選擇一個適合你硬體配置的模型進行下載。如果你的筆電不是高性能的，建議選擇小型的模型。</p><p><img loading="lazy" src="https://hackmd.io/_uploads/rJpHMx9Rh.png" alt="模型下載" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="步驟-4開始與聊天機器人對話">步驟 4：開始與聊天機器人對話<a href="#步驟-4開始與聊天機器人對話" class="hash-link" aria-label="Direct link to 步驟 4：開始與聊天機器人對話" title="Direct link to 步驟 4：開始與聊天機器人對話">​</a></h2><p>下載完成後，在左側選擇聊天頁籤。選擇你剛才下載的模型，等待模型加載完成後，就可以開始與聊天機器人對話了。</p><p><img loading="lazy" src="https://hackmd.io/_uploads/S1LszecRh.png" alt="聊天界面" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="結論與後續步驟">結論與後續步驟<a href="#結論與後續步驟" class="hash-link" aria-label="Direct link to 結論與後續步驟" title="Direct link to 結論與後續步驟">​</a></h2><p>建立自己的聊天機器人是一個不斷演進的過程。儘管 LM Studio 提供了一個相當方便的平台，但要達到商業應用水平，還需要進一步的微調和量化調教。如果你想要更進一步，可以考慮使用 OpenAI、Azure、Google 或 AWS 等平台的 API 進行模型的微調。</p><p>希望這篇文章能幫助你更輕鬆地入手聊天機器人的建立，祝你在人工智慧的旅程中一切順利！</p><p>如果有任何問題或需要進一步的說明，歡迎留言。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/llm">LLM</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/aigc">AIGC</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/my-site/en/blog/Selenium升級4.x版修正筆記">Selenium升級4.x版修正筆記</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-09-03T10:00:00.000Z" itemprop="datePublished">September 3, 2023</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/willismax.png" alt="Willis Chen"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Willis Chen</span></a></div><small class="avatar__subtitle" itemprop="description">Tech Instructor</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><ul><li>Selenium 是一個自動化測試框架，專門用於測試 Web 應用程式。作為一位經常需要隨著套件更新來調整教學內容的講師。將針對最近升級至 4.x 版本的 Selenium 進行比較，以及如何解決版本更新的程式碼問題。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="預期-selenium-版本更新會遇到的狀況">預期 Selenium 版本更新會遇到的狀況<a href="#預期-selenium-版本更新會遇到的狀況" class="hash-link" aria-label="Direct link to 預期 Selenium 版本更新會遇到的狀況" title="Direct link to 預期 Selenium 版本更新會遇到的狀況">​</a></h2><p>在過去，我預期會遇到以下幾種情況：</p><ul><li>需要更新至新版的 webdriver。</li><li>程式參數更新，需要查看 log 以解決問題。</li></ul><p>然而，升級至 Selenium 4.x 後，我發現了一些令人驚喜的改變。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-webdriver管理更聰明了">1. webdriver管理更聰明了<a href="#1-webdriver管理更聰明了" class="hash-link" aria-label="Direct link to 1. webdriver管理更聰明了" title="Direct link to 1. webdriver管理更聰明了">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="舊版流程">舊版流程<a href="#舊版流程" class="hash-link" aria-label="Direct link to 舊版流程" title="Direct link to 舊版流程">​</a></h3><p>在 Selenium 4.x 版本之前，安裝 Selenium 是一件相對繁瑣的事情。你需要：</p><ol><li>用 <code>pip install</code> 安裝 Selenium 主要套件。<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip install selenium</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>然後，你還需要手動<a href="https://www.selenium.dev/documentation/webdriver/getting_started/install_drivers/" target="_blank" rel="noopener noreferrer">下載</a>與你的 Chrome 版本相對應的 WebDriver。</li><li>解壓縮 WebDriver，然後將其放入指定目錄。</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="過渡版本--需額外的-webdriver_manager">過渡版本- 需額外的 webdriver_manager<a href="#過渡版本--需額外的-webdriver_manager" class="hash-link" aria-label="Direct link to 過渡版本- 需額外的 webdriver_manager" title="Direct link to 過渡版本- 需額外的 webdriver_manager">​</a></h3><ul><li><p>在2023年之前的一段時間簡化了上述流程，透過<code>pip install webdriver_manager</code>直接安裝好對應的測試瀏覽器，不用找對應的瀏覽器與版本，但需要引入webdriver_manager套件。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip install webdriver_manager</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>然後，使用webdriver_manager的範例如下:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> selenium </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> webdriver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> webdriver_manager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">chrome </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> ChromeDriverManager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">options </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> webdriver</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ChromeOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># options.add_argument(&#x27;--headless&#x27;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> webdriver</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Chrome</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ChromeDriverManager</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">install</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;https://www.google.com&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">save_screenshot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;google_homepage.png&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">quit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="新版流程">新版流程<a href="#新版流程" class="hash-link" aria-label="Direct link to 新版流程" title="Direct link to 新版流程">​</a></h3><ul><li><p>現在，在 Selenium 4.x 版本，你只需執行一個指令即可：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip install selenium</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>這個改變意味著，你不再需要手動去管理 WebDriver，Selenium 會為你處理一切。</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-seleniumwebdriverchrome參數簡化">2. selenium.webdriver.Chrome()`參數簡化<a href="#2-seleniumwebdriverchrome參數簡化" class="hash-link" aria-label="Direct link to 2. selenium.webdriver.Chrome()`參數簡化" title="Direct link to 2. selenium.webdriver.Chrome()`參數簡化">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="舊版用法">舊版用法<a href="#舊版用法" class="hash-link" aria-label="Direct link to 舊版用法" title="Direct link to 舊版用法">​</a></h3><ul><li><p>在舊版中，初始化 Chrome WebDriver 的代碼通常會看起來像這樣：</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> selenium </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> webdriver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">options </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> webdriver</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ChromeOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_argument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;--headless&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> webdriver</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Chrome</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;path/to/chromedriver&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> chrome_options</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="新版用法">新版用法<a href="#新版用法" class="hash-link" aria-label="Direct link to 新版用法" title="Direct link to 新版用法">​</a></h3><ul><li><p>在新版中，由於 WebDriver 已經被整合，你可以簡單地這樣做：</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> selenium </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> webdriver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">options </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> webdriver</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ChromeOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_argument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;--headless&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> webdriver</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Chrome</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="selenium-搜尋-ptt-指定列表範例">Selenium 搜尋 PTT 指定列表範例<a href="#selenium-搜尋-ptt-指定列表範例" class="hash-link" aria-label="Direct link to Selenium 搜尋 PTT 指定列表範例" title="Direct link to Selenium 搜尋 PTT 指定列表範例">​</a></h2><p>如你所見，新版省去了指定 chromedriver 路徑的需求，使得代碼更為簡潔，最後分享一個這學期調整的selenium範例:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> selenium </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> webdriver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> selenium</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">webdriver </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Chrome</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> selenium</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">webdriver</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">chrome</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">options </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Options</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> bs4 </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> BeautifulSoup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">make_webdriver</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Chrome</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> create_options</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  driver </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Chrome</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#簡化參數</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> driver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">create_options</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Options</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_argument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;--headless&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_argument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;--no-sandbox&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_argument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;--disable-dev-shm-usage&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_argument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;--start-maximized&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> options</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get_ptt_board_list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">board</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:#e3116c">f&quot;https://www.ptt.cc/bbs/</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">board</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">/index.html&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  wd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> make_webdriver</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  wd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">url</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">url</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  soup </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> BeautifulSoup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">page_source</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;html.parser&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  links </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> soup</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;div.title &gt; a&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&#x27;title&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> link</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_text</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&#x27;href&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:#e3116c">f&#x27;https://www.ptt.cc</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">link</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">get</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation string" style="color:#e3116c">&quot;href&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> link </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> links </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;公告&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> link</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_text</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  wd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">quit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> res</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;__main__&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> get_ptt_board_list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;movie&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="小結">小結<a href="#小結" class="hash-link" aria-label="Direct link to 小結" title="Direct link to 小結">​</a></h2><p>Selenium 4.x 版本帶來了許多便利性的提升，尤其是在 WebDriver 管理和參數簡化方面。這對於減少教學備課的負擔以及提高自動化測試的效率都有很大的幫助。</p><p>我個人非常推薦升級至這個版本，以便能夠利用這些新的特性和優化。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/selenium">Selenium</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/python">Python</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/my-site/en/blog/用PlayWright抓取動態網站資料">用PlayWright抓取動態網站資料</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-07-03T00:00:00.000Z" itemprop="datePublished">July 3, 2023</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/willismax.png" alt="Willis Chen"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Willis Chen</span></a></div><small class="avatar__subtitle" itemprop="description">Tech Instructor</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>在這篇文章中，將探討如何使用Python的PlayWright模組來抓取巴哈姆特動漫瘋的彈幕數據。
目標如下:</p><ul><li>認識PlayWright</li><li>如何安裝PlayWright。</li><li>如何利用PlayWright控制網頁行為。</li><li>如何改寫腳本，抓取、整理和儲存需要的數據。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="什麼是playwright">什麼是PlayWright?<a href="#什麼是playwright" class="hash-link" aria-label="Direct link to 什麼是PlayWright?" title="Direct link to 什麼是PlayWright?">​</a></h2><p><a href="https://github.com/microsoft/playwright-python" target="_blank" rel="noopener noreferrer">PlayWright</a> 是Microsoft推出的開源專案，是一個Python用戶端，讓我們能夠自動化Web瀏覽器的行為，包括Chrome, Firefox, 和Safari等主流瀏覽器。你可以使用它來進行網站測試、抓取資料，甚至製作自動化的網頁腳本。透過PlayWright，你能控制整個瀏覽過程，包括產生彈幕等動態內容。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="如何安裝playwright">如何安裝PlayWright<a href="#如何安裝playwright" class="hash-link" aria-label="Direct link to 如何安裝PlayWright" title="Direct link to 如何安裝PlayWright">​</a></h2><p>安裝PlayWright相當簡單，只需要在你的命令列工具 (例如：終端機或Command Prompt) 輸入以下命令即可：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; pip install playwright</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="如何利用playwright控制網頁行為">如何利用PlayWright控制網頁行為<a href="#如何利用playwright控制網頁行為" class="hash-link" aria-label="Direct link to 如何利用PlayWright控制網頁行為" title="Direct link to 如何利用PlayWright控制網頁行為">​</a></h2><p>首先，我們需要啟動一個PlayWright的實例，並且以我們選定的瀏覽器來執行我們的程式。以下是一個以Chromium瀏覽器為例的程式碼，同理也可以使用webkit瀏覽器：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; python -m playwright codegen -b chromium</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>執行上述命令後，您將開啟一個Chromium瀏覽器並開始與其互動。你的每一個操作，都會自動生成對應的Python程式碼。</p><p>codegen命令包含一些可用的參數，例如：</p><ul><li><code>--target</code>: 設定你的程式語言，如 python、JavaScript等。</li><li><code>-o</code>: 指定存放生成程式碼的檔案名稱。</li><li><code>-b</code>: 選擇你想要使用的瀏覽器，如 chromium、firefox或webkit。</li></ul><p>以下是一個實際的例子，使用webkit瀏覽器抓取巴哈姆特動漫瘋網站並將程式碼儲存在damun.py文件中：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; python -m playwright codegen --target python -o damun.py -b webkit https://ani.gamer.com.tw/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>此時的<code>damun.py</code>內容參考如下:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> playwright</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sync_api </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Playwright</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sync_playwright</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> bs4 </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> BeautifulSoup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> sys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">playwright</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Playwright</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    browser </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> playwright</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">chromium</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">launch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">headless</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    context </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> browser</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">new_context</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    page </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">new_page</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    page</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">goto</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;https://ani.gamer.com.tw/animeVideo.php?sn=</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">sn</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># screenshot</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    page</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">screenshot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;ani.jpg&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> full_page </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">### 稍後加上網頁解析</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">### 稍後加上內容萃取</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">### 稍後加上資料儲存</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    page</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ---------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    browser</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> sync_playwright</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> playwright</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">playwright</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">argv</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="修改playwright腳本">修改PlayWright腳本<a href="#修改playwright腳本" class="hash-link" aria-label="Direct link to 修改PlayWright腳本" title="Direct link to 修改PlayWright腳本">​</a></h2><p>為了包含抓取後的解析及整理，可以在前面透過點選產製的damun.py腳本中，新增解析的程式</p><ul><li><p>網頁解析: <code>page</code>內容為HTML，將其轉換成<code>BeautifulSoup</code>物件，方便後續操作。</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> bs4 </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> BeautifulSoup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">soup </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> BeautifulSoup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">page</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;lxml&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>內容萃取:
這邊藏的一個很關鍵的做法，用For迴圈直接將結果設計為JSON like的Python Dictionary格式。</p><ul><li>每次回圈的過程一次性的將擷取對象整理好。<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># for-loops</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> li </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> soup</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;.sub-list-li&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    k</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;userid&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> li</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select_one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;.name &gt; span&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    k</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;text&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> li</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select_one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;.sub_content&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    k</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;msg_time&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> li</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select_one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;b&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">k</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>如果你熟悉列表推導式(list comprehension)，以下改寫更為直觀:<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;userid&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> li</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select_one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;.name &gt; span&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;text&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> li</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select_one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;.sub_content&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;msg_time&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> li</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select_one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;b&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> li </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> soup</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;.sub-list-li&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>資料儲存: 將Dict樣式存成JSON格式，方便後續運用。</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> </span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&#x27;damun_</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">sn</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">.json&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;w&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dump</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>最終的<code>damun.py</code>腳本內容:</p></li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> playwright</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sync_api </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Playwright</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sync_playwright</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> bs4 </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> BeautifulSoup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> sys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">playwright</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Playwright</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    browser </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> playwright</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">chromium</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">launch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">headless</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    context </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> browser</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">new_context</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    page </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">new_page</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    page</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">goto</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;https://ani.gamer.com.tw/animeVideo.php?sn=</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">sn</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># screenshot</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    page</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">screenshot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;ani.jpg&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> full_page </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 網頁解析</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    soup </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> BeautifulSoup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">page</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;lxml&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 內容萃取(列表推導式)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;userid&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> li</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select_one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;.name &gt; span&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;text&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> li</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select_one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;.sub_content&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;msg_time&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> li</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select_one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;b&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> li </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> soup</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;.sub-list-li&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 資料儲存(JSON檔)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> </span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&#x27;damun_</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">sn</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">.json&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;w&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dump</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    page</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ---------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    browser</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> res</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> sync_playwright</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> playwright</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">playwright</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">argv</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="執行playwright腳本">執行playwright腳本<a href="#執行playwright腳本" class="hash-link" aria-label="Direct link to 執行playwright腳本" title="Direct link to 執行playwright腳本">​</a></h2><p>接下來，執行我們生成的腳本，可以在命令列執行腳本。</p><blockquote><p>33846為動畫的編號，可以更換成想要分析的動畫序號。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python damun.py 33846</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然後，使用Python的<code>ast</code>模組將結果轉換為Python對象。以下是一個實際的例子：</p></blockquote><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 此欄位內容於ipynb執行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">res = ! python damun.py 33846</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import ast</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">res = [ast.literal_eval(i) for i in res]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(res)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="將內容存為pagejson">將內容存為<code>page.json</code><a href="#將內容存為pagejson" class="hash-link" aria-label="Direct link to 將內容存為pagejson" title="Direct link to 將內容存為pagejson">​</a></h2><p>有兩種方式可以將我們獲得的結果儲存為json格式。一種方式是使用linux的命令行將結果重定向到一個json檔案中。例如：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; python damun.py 33846 &gt; page.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>另一種方式是直接在Python腳本中將結果儲存為json檔案。以下是一個實際的例子：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">file_name = &#x27;damun_33846.json&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">with open(file_name, &#x27;r&#x27;, encoding=&#x27;utf-8&#x27;) as f:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    my_data = json.loads(f.read())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(my_data) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(type(my_data))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>解析的結果為:
<img loading="lazy" src="https://hackmd.io/_uploads/rkQ5rwxF2.png" class="img_ev3q"></p><p>擷取完成!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="重點精華">重點精華<a href="#重點精華" class="hash-link" aria-label="Direct link to 重點精華" title="Direct link to 重點精華">​</a></h2><ul><li>PlayWright可以輕鬆的將使用者操作流程紀錄為程式碼。</li><li>PlayWright與Selenium最大的差異，不用刻意搜尋並安裝對應版本的模擬瀏覽器。</li><li>結合常用的Beautiful可以快速解析內容，我偏好用類似CSS Selec。</li><li>用列表推導式將爬梳的資料整理成字典，語法相當簡潔。</li><li>將結果儲存成JSON2檔案，方便後續運用</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="小結">小結<a href="#小結" class="hash-link" aria-label="Direct link to 小結" title="Direct link to 小結">​</a></h2><p>在上述的Python腳本中，首先定義了我們的檔案名稱。然後，我們使用Python的內建函數open讀取該檔案。最後，我們使用json模組的loads函數將讀取到的資料轉換為Python物件。</p><p>以上就是如何使用PlayWright抓取並分析巴哈姆特動漫瘋的彈幕數據的全過程。透過這個過程，我們不僅學習到如何使用PlayWright，如果有興趣，後續再介紹如何進一步分析數據，歡迎留言讓我知道。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/python">Python</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/tech">Tech</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/play-wright">PlayWright</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/爬蟲">爬蟲</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/資料分析">資料分析</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/my-site/en/blog/用HackMD API打造個人專屬LINE BOT助手">用HackMD API打造個人專屬LINE BOT助手</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-06-09T00:00:00.000Z" itemprop="datePublished">June 9, 2023</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/willismax.png" alt="Willis Chen"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Willis Chen</span></a></div><small class="avatar__subtitle" itemprop="description">Tech Instructor</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="用-line-chat-bot可以解決什麼問題">用 &quot;LINE Chat BOT&quot;可以解決什麼問題<a href="#用-line-chat-bot可以解決什麼問題" class="hash-link" aria-label="Direct link to 用 &quot;LINE Chat BOT&quot;可以解決什麼問題" title="Direct link to 用 &quot;LINE Chat BOT&quot;可以解決什麼問題">​</a></h2><ul><li>隨手筆記的需求</li><li>從不同APP分享連結的蒐集去處</li><li>不用再經手別的生產力工具，直接歸一到最熟悉的HackMD</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="建立-line-chat-bot-的流程">建立 &quot;LINE Chat BOT&quot; 的流程<a href="#建立-line-chat-bot-的流程" class="hash-link" aria-label="Direct link to 建立 &quot;LINE Chat BOT&quot; 的流程" title="Direct link to 建立 &quot;LINE Chat BOT&quot; 的流程">​</a></h2><ul><li>首先要申請 <a href="https://hackmd.io/@hackmd-api/developer-portal" target="_blank" rel="noopener noreferrer">HackMD API</a> 。</li><li>在 <a href="https://developers.line.biz/zh-hant/" target="_blank" rel="noopener noreferrer">LINE Developers</a> 創一個專屬 Channel，取得Token等資訊與訊息設定。</li><li>在 Fly.io 創立雲端服務、建立好開發連線環境。</li><li>Fork 我的<a href="https://github.com/willismax/hackmd-line-bot-on-fly" target="_blank" rel="noopener noreferrer">GitHub HackMD LINE bot on fly 程式碼</a>，修改為您準備部屬在 Fly.io 的 LINE BOT 程式。</li><li>將您 Fly.io 的連結 <code>https://[APP Name].fly.io/callback</code>填入您LINE Channel 的 Webhook。</li><li>感動! 成功!。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="line-chat-bot程式碼"><code>LINE Chat BOT</code><a href="https://github.com/willismax/hackmd-line-bot-on-fly" target="_blank" rel="noopener noreferrer">程式碼</a><a href="#line-chat-bot程式碼" class="hash-link" aria-label="Direct link to line-chat-bot程式碼" title="Direct link to line-chat-bot程式碼">​</a></h2><blockquote><p><a href="https://github.com/willismax/hackmd-line-bot-on-fly" target="_blank" rel="noopener noreferrer">https://github.com/willismax/hackmd-line-bot-on-fly</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="line-chat-bot-功能需求">&quot;LINE Chat BOT&quot; 功能需求<a href="#line-chat-bot-功能需求" class="hash-link" aria-label="Direct link to &quot;LINE Chat BOT&quot; 功能需求" title="Direct link to &quot;LINE Chat BOT&quot; 功能需求">​</a></h2><ul><li><p>標示<code>@靈感</code>為開頭的文字，將作為一個獨立的靈感筆記。
<img loading="lazy" src="https://hackmd.io/_uploads/r1Vo7wRzo.png" alt="link text" class="img_ev3q"></p></li><li><p>標示<code>@TODO</code>為開頭的文字，將寫入一個連續的的代辦清單。
<img loading="lazy" src="https://hackmd.io/_uploads/HJHbEDAfo.png" class="img_ev3q"></p></li><li><p>無上述標示的文字，將寫入一個連續附加的在暫存筆記。也就是從別的文章分享的超連結都直接灌到此暫存筆記。
<img loading="lazy" src="https://hackmd.io/_uploads/HJbQNvRzi.png" class="img_ev3q"></p></li><li><p>如果要整理筆記，用電腦編輯整理即可。</p></li></ul><p>:::spoiler 部署教學文參考</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="如何建立-line-bot">如何建立 LINE bot<a href="#如何建立-line-bot" class="hash-link" aria-label="Direct link to 如何建立 LINE bot" title="Direct link to 如何建立 LINE bot">​</a></h2><ul><li><p>在 <a href="https://developers.line.biz/zh-hant/" target="_blank" rel="noopener noreferrer">LINE Developers</a>
登入您的 LINE 帳號，建立 Provider 以及所屬 Channel， Channel 名稱就是您的 LINE bot 名稱，管理方式如同 <a href="https://tw.linebiz.com/login/" target="_blank" rel="noopener noreferrer">LINE 官方帳號</a>。</p></li><li><p>用程式控制的聊天機器人需要以下3個參數，請保管好勿外流。
在此範例程式中，需要將 Channel 查到的以下參數填入<code>config.py</code>檔案。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CHANNEL_ACCESS_TOKEN = &#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CHANNEL_SECRET = &#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LINE_USER_ID = &#x27;&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="在-flyio-創立與部署雲端服務">在 Fly.io 創立與部署雲端服務<a href="#在-flyio-創立與部署雲端服務" class="hash-link" aria-label="Direct link to 在 Fly.io 創立與部署雲端服務" title="Direct link to 在 Fly.io 創立與部署雲端服務">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="先-clone-flyio-的-python-示範專案">先 Clone <a href="http://fly.io/" target="_blank" rel="noopener noreferrer">Fly.io</a> 的 Python 示範專案。<a href="#先-clone-flyio-的-python-示範專案" class="hash-link" aria-label="Direct link to 先-clone-flyio-的-python-示範專案" title="Direct link to 先-clone-flyio-的-python-示範專案">​</a></h3><ul><li><p>在本機電腦<a href="https://git-scm.com/downloads" target="_blank" rel="noopener noreferrer">安裝git</a>，您可以先完成以下示範範例後，再將程式碼改成LINE Chat BOT程式碼即可。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/fly-apps/python-hellofly-flask</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>進入專案資料夾</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd  .\python-hellofly-flask\</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>安裝該專案所需的外部套件</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python -m pip install -r requirements.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>[選用]<!-- --> 如果要在本機進行開發測試，可以設置環境變數<code>FLASK_APP</code>，目的是指定主程式的執行檔，對此專案而言主程式為<code>hellofly.py</code>，經指定後<code>flask run</code>指定就是跑主程式，而且要結合 <a href="https://ngrok.com/" target="_blank" rel="noopener noreferrer">Ngrok</a>建立臨時通道，對您來說太複雜的話可以跳過，只是各種測試就必須等待部署後。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//設置環境變數</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export FLASK_APP=hellofly.py   #linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set FLASK_APP=hellofly.py   #windows</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//日後啟動flask的指令</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flask run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>!! 如果用環境變數都跑不出來，退而求其次，在<code>hellofly.py</code>最後加入:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if __name__ == &#x27;__main__&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    app.run(debug=True)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>啟動flask指令改為<code>python hello.py</code>，請注意，<a href="https://www.maxlist.xyz/2020/04/30/flask-helloworld/" target="_blank" rel="noopener noreferrer">這不是flask現在建議的啟用方式</a>，本方法只適用於本機測試。</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="使用fly-ctl-指令工具完成部署">使用<code>fly ctl</code> 指令工具完成部署<a href="#使用fly-ctl-指令工具完成部署" class="hash-link" aria-label="Direct link to 使用fly-ctl-指令工具完成部署" title="Direct link to 使用fly-ctl-指令工具完成部署">​</a></h3><p>上述範例程式碼測試無誤後，接續安裝 <code>fly ctl</code> 指令工具。Fly.io 最方便部署服務的方式是使用終端機指令工具<code>flyctl</code>，可以讓本機直接部署。</p><ul><li><p><a href="https://fly.io/docs/getting-started/installing-flyctl/" target="_blank" rel="noopener noreferrer">安裝flyctl</a><br>
<!-- -->PowerShell</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">iwr https://fly.io/install.ps1 -useb | iex</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Mac</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">brew install flyctl #MAC</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Linux</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -L https://fly.io/install.sh | sh #LINUX</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><a href="https://fly.io/docs/getting-started/log-in-to-fly/" target="_blank" rel="noopener noreferrer">用 flyctl 登入 fly.io</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flyctl auth login</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>啟動一個 fly App 專案，執行 <code>flyctl launch</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flyctl launch</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>選擇伺服器區域，台灣鄰近的區域有香港、東京可選。</p></li><li><p>修改程式，這邊在範例專案中特別提醒，<code>Procfile</code>檔案為設定連線服務用，與您的主程式檔名務必相符，也就是原本為<code>web: gunicorn server:app</code>記得改成<code>web: gunicorn hellofly:app</code>，這原理跟部署在 Heroku 是一樣的。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># file name: Procfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">web: gunicorn hellofly:app  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              ^^^^^^^^記得確認為主程式</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>檢查完程式後，一鍵佈署。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flyctl deploy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>查看佈署，其中<code>hostname</code>就是網址了，可以用<code>flyctl status</code>確認狀態、用<code>flyctl open</code>開啟 APP、用<code>flyctl logs</code>確認有無 BUG。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flyctl status    </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flyctl open</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flyctl logs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>如果需要<a href="https://fly.io/docs/reference/secrets/" target="_blank" rel="noopener noreferrer">設定 secrets</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flyctl secrets set DATABASE_URL= ....</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>取消 secrets</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flyctl secrets unset DATABASE_URL= ....</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>列出 secrets list</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flyctl secrets list</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="line-chat-bot程式碼-1"><code>LINE Chat BOT</code><a href="https://github.com/willismax/hackmd-line-bot-on-fly" target="_blank" rel="noopener noreferrer">程式碼</a><a href="#line-chat-bot程式碼-1" class="hash-link" aria-label="Direct link to line-chat-bot程式碼-1" title="Direct link to line-chat-bot程式碼-1">​</a></h2><blockquote><p><a href="https://github.com/willismax/hackmd-line-bot-on-fly" target="_blank" rel="noopener noreferrer">https://github.com/willismax/hackmd-line-bot-on-fly</a></p></blockquote><ul><li><p>可以對照您上述部署完成的<code>python-hellofly-flask</code>程式碼進行修改，</p><ul><li>填入對應的參數到<code>config.py</code></li><li>修改<code>app.py</code></li><li>修改<code>requestments.txt</code></li></ul></li><li><p>執行<code>flyctl deploy</code>部署。請注意，<code>*.toml</code>請用您自己的，該檔案是由 <code>flyctl launch</code> 產生，為了您的專案部屬所需的檔案，用範例檔會出錯唷。</p></li><li><p>也請記得補上 HackMD API token 與筆記ID相關資訊:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">HACKMD_API_TOKEN = &#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TODO_NOTE_ID = &#x27;&#x27; #  paste your fixed TODO note id, len == 22</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEMP_NOTE_ID = &#x27;&#x27; # paste your fixed TEMP note id, len == 22</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>上述有問題的話就耐心看<code>flyctl logs</code>，我常作的方式是開兩個終端機，一個執行操作、一個看 log 。</p></li><li><p>部署完成後，記得把您的 fly.io 專屬服務網址貼入 LINE Channel 的 Webhook ，網址應為 <code>https://[APP Name].fly.io/callback</code> ，特別是 <code>*/callback</code> 記得填，並且設定開啟 Webhook。</p></li><li><p>恭喜您完成!</p></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/web">web</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/tech">Tech</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/my-site/en/blog/2023六角學院軟體工程師體驗營心得">2023六角學院軟體工程師體驗營心得</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-06-08T00:00:00.000Z" itemprop="datePublished">June 8, 2023</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/willismax.png" alt="Willis Chen"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Willis Chen</span></a></div><small class="avatar__subtitle" itemprop="description">Tech Instructor</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="多元化的課程內容-">多元化的課程內容 📚🎥<a href="#多元化的課程內容-" class="hash-link" aria-label="Direct link to 多元化的課程內容 📚🎥" title="Direct link to 多元化的課程內容 📚🎥">​</a></h2><p>六角學院是台灣前端知名的線上教學服務平台，這次已非常少的售價開設了短期密集軟工體驗營，體驗的內容包含前端基礎、CSS、SCSS、切版任務、JS、Jquery、Ajax、Axios，在這次的體驗營中，我們在有限的時間內接觸了相當多的課程內容。這些線上影音很多是不同的直播、教學課程的集合。真的讓我感到既驚訝又欣喜！🎉</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="每日的切版與js練習-️">每日的切版與JS練習 🖥️🔬<a href="#每日的切版與js練習-️" class="hash-link" aria-label="Direct link to 每日的切版與JS練習 🖥️🔬" title="Direct link to 每日的切版與JS練習 🖥️🔬">​</a></h2><p>除了假日以外，每日我們都有關於切版、JS的兩種練習。最後，這些練習都會回到產出作業上，讓我們有機會將所學應用到實際操作中，真的是學以致用！💡📝</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="作業審視與助教回饋-">作業審視與助教回饋 📋🔍<a href="#作業審視與助教回饋-" class="hash-link" aria-label="Direct link to 作業審視與助教回饋 📋🔍" title="Direct link to 作業審視與助教回饋 📋🔍">​</a></h2><p>在產出作業的過程中，作業等級越高越完整。而這其中，最讓我感動的是有助教群細心審視我們的作業並提供回饋。這樣的機會真的非常難得，我們能夠從中學習到很多，進步也就在這一點一滴中實現。👍👏</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="交流討論與提問-️">交流討論與提問 🗣️💭<a href="#交流討論與提問-️" class="hash-link" aria-label="Direct link to 交流討論與提問 🗣️💭" title="Direct link to 交流討論與提問 🗣️💭">​</a></h2><p>最後，也很感謝能夠在課程提問區提出問題，並透過交流討論來解答疑惑，慢慢走也是會往前的😊🐢</p><p>總結來說，我真的很感謝六角學院提供這樣的體驗機會。從中我學習到很多，並且在學習的道路上也逐步累積。期待下一次的學習體驗！🎈🚀</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/web">web</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/tech">Tech</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/my-site/en/blog/從亞當斯密看不見的手認識ESG">從亞當斯密看不見的手認識ESG</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-05-25T00:00:00.000Z" itemprop="datePublished">May 25, 2023</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/willismax.png" alt="Willis Chen"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Willis Chen</span></a></div><small class="avatar__subtitle" itemprop="description">Tech Instructor</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="為什麼會有這篇文章">為什麼會有這篇文章?<a href="#為什麼會有這篇文章" class="hash-link" aria-label="Direct link to 為什麼會有這篇文章?" title="Direct link to 為什麼會有這篇文章?">​</a></h2><ul><li>近期工作與推動ESG高度相關，也記錄此時此刻的一些心得感想。</li><li>本篇文章內容由Bing協作。</li></ul><h1>從亞當斯密的&quot;看不見的手&quot;討論ESG</h1><p>你有沒有聽過亞當斯密的「看不見的手」？這是一個經濟學的名詞，指的是市場機能能夠自動調節供需，讓每個人都能追求自己的利益，同時也促進社會的福祉。聽起來很神奇，但是這個「看不見的手」其實有一個隱藏的秘密，那就是它其實是一隻「ESG」的手！今天我想和大家聊聊亞當斯密的&quot;看不見的手&quot;和ESG之間的關係。😊</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="什麼是esg">什麼是ESG？<a href="#什麼是esg" class="hash-link" aria-label="Direct link to 什麼是ESG？" title="Direct link to 什麼是ESG？">​</a></h2><p>ESG是環境、社會和治理（Environmental, Social and Governance）的縮寫，它是一種評估企業對社會責任和可持續發展的影響的方法。ESG涵蓋了許多方面，例如減少碳排放、保護生物多樣性、改善勞工權益、反對貪腐和提高透明度等。🌎</p><p>近年來，ESG越來越受到投資者、消費者和政策制定者的重視，因為它不僅關係到企業的道德和聲譽，也關係到企業的長期競爭力和風險管理。許多研究表明，高ESG表現的企業往往能夠創造更高的股東價值、更低的資金成本、更強的創新能力和更高的員工忠誠度。💰</p><p><img loading="lazy" src="https://source.unsplash.com/960x640/?esg" alt="ESG" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="什麼是看不見的手">什麼是&quot;看不見的手&quot;？<a href="#什麼是看不見的手" class="hash-link" aria-label="Direct link to 什麼是&quot;看不見的手&quot;？" title="Direct link to 什麼是&quot;看不見的手&quot;？">​</a></h2><p>&quot;看不見的手&quot;是一個出現在經濟學之父亞當斯密的《國富論》和《道德情操論》中的一個詞彙，它指的是在自由市場中，每個人追求自己的利益，通過價格機制，最終會促進社會整體的福利，就像有一隻看不見的手在指導經濟活動一樣。👋</p><p>舉個例子，假設你想買一個蘋果，你會在市場上找到最便宜的蘋果賣家，而賣家則會根據供需關係設定一個合理的價格，這樣你們雙方都能得到最大的滿足。同時，這也會刺激其他蘋果生產者提高產量和品質，降低成本和價格，從而增加社會的總產出和消費。🍎</p><p><img loading="lazy" src="https://source.unsplash.com/960x640/?apple" alt="蘋果" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="看不見的手和esg有什麼關係">&quot;看不見的手&quot;和ESG有什麼關係？<a href="#看不見的手和esg有什麼關係" class="hash-link" aria-label="Direct link to &quot;看不見的手&quot;和ESG有什麼關係？" title="Direct link to &quot;看不見的手&quot;和ESG有什麼關係？">​</a></h2><p>你可能會覺得&quot;看不見的手&quot;和ESG是相互對立的概念，因為前者強調市場自由和個人利益，後者強調社會責任和公共利益。但其實，它們之間並不是那麼簡單的對立關係，而是有著複雜而微妙的互動。😉</p><p>首先，亞當斯密在他的另一本著作《道德情操論》中，提出了一個重要的概念，那就是「同情心」（sympathy）。他認為人類是一種社會性的動物，具有與他人共感和同理的能力，這種能力讓我們能夠關心他人的利益和幸福，也讓我們能夠遵守道德規範和社會規則。這不就是ESG中的「社會」嗎？</p><blockquote><p>你可能會問，那他怎麼沒有提到「愛心」（love）呢？因為他知道愛情是盲目的，而市場是明智的！（笑）</p></blockquote><p>其次，亞當斯密在他的《國富論》中，也沒有忽視環境問題。他指出了農業對土地資源的消耗和浪費，並且主張應該通過稅收來抑制農業生產過剩和土地荒廢。他還提出了「公共工程」（public works）的概念，認為政府應該負責建設和維護基礎設施，如道路、橋樑、港口等，以促進交通和貿易，也以保護環境和公共安全。這不就是ESG中的「環境」嗎？</p><blockquote><p>你可能會問，那他怎麼沒有提到「節約」（save）呢？因為他知道節約是美德，但消費才能帶動經濟！（笑）</p></blockquote><p>最後，亞當斯密在他的《國富論》中，也強調了治理問題。他批判了當時英國政府對商業和貿易的過度干預和限制，例如重商主義政策、商業壟斷、關稅壁壘等。他主張政府應該放寬市場准入，保護私有財產權和契約自由，打擊貪污和腐敗，保障法治和司法公正。這不就是ESG中的「治理」嗎？</p><blockquote><p>你可能會問，那他怎麼沒有提到「民主」（democracy）呢？因為他知道民主是好事，但市場才是王道！（笑）</p></blockquote><p><img loading="lazy" src="https://source.unsplash.com/960x640/?competition" alt="競爭" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="結語">結語<a href="#結語" class="hash-link" aria-label="Direct link to 結語" title="Direct link to 結語">​</a></h2><p>所以你看，亞當斯密其實是一個ESG的先驅！他不僅提出了「看不見的手」這個偉大的經濟學思想，也提出了「ESG」這個偉大的企業社會責任思想！我們今天所看到的市場經濟和企業社會責任，都是他留給我們的寶貴遺產！。😊</p><p>感謝大家閱讀我的部落格文章，如果你有任何意見或建議，歡迎在下面留言或聯絡我。下次再見！👋
(本文笑點提供: Bing)</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/esg">ESG</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/my-site/en/blog/使用 GitHub Actions 自動部署 Docusaurus 網誌並優化 SEO">使用 GitHub Actions 自動部署 Docusaurus 網誌並優化 SEO</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-03-09T23:00:00.000Z" itemprop="datePublished">March 9, 2023</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/willismax.png" alt="Willis Chen"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Willis Chen</span></a></div><small class="avatar__subtitle" itemprop="description">Tech Instructor</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><a href="https://hackmd.io/pMZX7mLQRN-hD-MG3ASReA" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://hackmd.io/pMZX7mLQRN-hD-MG3ASReA/badge" alt="hackmd-github-sync-badge" class="img_ev3q"></a></p><p><img loading="lazy" src="https://hackmd.io/_uploads/ryzvXkw12.png" class="img_ev3q"></p><p>如果你是一個 Docusaurus 使用者，你可能已經知道如何使用 Github Pages 部署你的網誌。但是，手動更新並部署你的網誌非常耗時，而且容易出錯。為了解決這個問題，你可以使用 GitHub Actions 來自動生成和部署你的網誌，這樣你就可以專注於撰寫新的文章了。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="什麼是-github-actions">什麼是 GitHub Actions？<a href="#什麼是-github-actions" class="hash-link" aria-label="Direct link to 什麼是 GitHub Actions？" title="Direct link to 什麼是 GitHub Actions？">​</a></h2><p>GitHub Actions 是一個自動化工具，可以幫助你自動執行各種任務，例如建立和測試你的應用程序，將你的應用程序部署到不同的環境中，或者自動發佈你的網誌文章。你可以使用 GitHub Actions 的預設工作流程，或者創建自己的自訂工作流程。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="如何使用-github-actions-自動部署-docusaurus-網誌">如何使用 GitHub Actions 自動部署 Docusaurus 網誌？<a href="#如何使用-github-actions-自動部署-docusaurus-網誌" class="hash-link" aria-label="Direct link to 如何使用 GitHub Actions 自動部署 Docusaurus 網誌？" title="Direct link to 如何使用 GitHub Actions 自動部署 Docusaurus 網誌？">​</a></h2><p>下面是一個簡單的步驟，可以幫助你在 GitHub Actions 中自動生成和部署你的 Docusaurus 網誌。</p><ol><li><p>在你的 Docusaurus 存儲庫中，創建一個名為 <code>.github/workflows/deploy.yml</code> 的文件。</p></li><li><p>在 <code>deploy.yml</code> 文件中添加以下內容：</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deploy website</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/checkout@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Install Node.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/setup</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">node@v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">node-version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;14.x&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Build and deploy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> JamesIves/github</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pages</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deploy</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">action@4.1.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">branch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gh</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">folder</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">clean</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>這個工作流程會在主分支上進行 push 時運行。它會在最新的 Ubuntu 環境中運行，安裝 Node.js，構建你的 Docusaurus 網誌，然後將它部署到 <code>gh-pages</code> 分支。</p></li><li><p>在你的 Docusaurus 存儲庫中，建立一個名為 <code>build</code> 的文件夾。</p></li><li><p>執行以下命令，生成你的 Docusaurus 網誌：</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm run build` </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>這將在 <code>build</code> 文件夾中生成編譯後的靜態網頁。</p></li><li><p>執行以下命令，將你的更改提交到存儲庫中：</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git add .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git commit </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">m &quot;Update website&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git push</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>這會觸發 GitHub Actions，自動生成和部署你的 Docusaurus 網誌。你可以在 GitHub Actions 的頁面上查看進度和結果。如果一切順利，你的網誌應該已經部署到 <code>gh-pages</code> 分支中。</p></li><li><p>現在你可以在瀏覽器中訪問你的網誌，例如 <code>https://yourusername.github.io/yourblog/</code>。如果一切正常，你應該能夠看到你的網誌文章。</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="如何優化你的-docusaurus-網誌的-seo">如何優化你的 Docusaurus 網誌的 SEO？<a href="#如何優化你的-docusaurus-網誌的-seo" class="hash-link" aria-label="Direct link to 如何優化你的 Docusaurus 網誌的 SEO？" title="Direct link to 如何優化你的 Docusaurus 網誌的 SEO？">​</a></h2><p>  現在你已經成功地使用 GitHub Actions 自動部署了你的 Docusaurus 網誌，接下來你可能想要優化你的網誌的 SEO，以便更好地吸引流量和讀者。以下是一些簡單的技巧，可以幫助你優化你的網誌的 SEO。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-使用關鍵字進行標題和內容的優化">1. 使用關鍵字進行標題和內容的優化<a href="#1-使用關鍵字進行標題和內容的優化" class="hash-link" aria-label="Direct link to 1. 使用關鍵字進行標題和內容的優化" title="Direct link to 1. 使用關鍵字進行標題和內容的優化">​</a></h3><p>  在你的網誌文章的標題和內容中使用關鍵字，以便搜索引擎能夠更好地理解你的內容，並將其排名更高。但是，不要過度使用關鍵字，否則你的內容可能會被搜索引擎視為垃圾郵件。關鍵字優化的訣竅是參考Google搜尋結果的相關搜尋，將相關搜尋的文章進一步整理為合適的內容，讓讀者能在這一篇文章就可以滿足需求。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-創建有價值的內容">2. 創建有價值的內容<a href="#2-創建有價值的內容" class="hash-link" aria-label="Direct link to 2. 創建有價值的內容" title="Direct link to 2. 創建有價值的內容">​</a></h3><p>  創建有價值的內容是吸引讀者和排名更高的關鍵。寫出具有深度和價值的內容，以便讀者和搜索引擎都能夠看到你的專業知識和價值，自己的洞見非常重要，讀者不會想只看到類似 ChatGPT 生成的大量文章。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-使用適當的標記和元數據">3. 使用適當的標記和元數據<a href="#3-使用適當的標記和元數據" class="hash-link" aria-label="Direct link to 3. 使用適當的標記和元數據" title="Direct link to 3. 使用適當的標記和元數據">​</a></h3><p>  使用適當的標記和元數據，例如標題標記、描述標記和關鍵字標記，以幫助搜索引擎更好地理解你的內容。同時，使用適當的元數據，例如 Open Graph 協議和 Twitter 卡片，以使你的內容在社交媒體上分享時更有吸引力。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-使用友好的-url">4. 使用友好的 URL<a href="#4-使用友好的-url" class="hash-link" aria-label="Direct link to 4. 使用友好的 URL" title="Direct link to 4. 使用友好的 URL">​</a></h3><p>  使用友好的 URL，以便讀者和搜索引擎更好地理解你的內容。使用有意義的字詞和短條目，避免使用難以理解的符號和數字。同時，使用靜態 URL，以便搜索引擎可以更輕鬆地索引你的網站。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-關注網站的速度和性能">5. 關注網站的速度和性能<a href="#5-關注網站的速度和性能" class="hash-link" aria-label="Direct link to 5. 關注網站的速度和性能" title="Direct link to 5. 關注網站的速度和性能">​</a></h3><p>  優化你的網站的速度和性能，以便更好地吸引流量和提高排名。使用快速的網站主機和優化的圖像，避免使用過多的 JavaScript 和 CSS，以減少網站的加載時間。同時，使用快取和網站緩存，以便減少服務器負載並提高網站的速度。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-建立高質量的內部和外部連結">6. 建立高質量的內部和外部連結<a href="#6-建立高質量的內部和外部連結" class="hash-link" aria-label="Direct link to 6. 建立高質量的內部和外部連結" title="Direct link to 6. 建立高質量的內部和外部連結">​</a></h3><p>  建立高質量的內部和外部連結，以幫助搜索引擎更好地理解你的內容並提高你的排名。使用有意義的錨文本和鏈接到相關的內容，同時建立高質量的外部鏈接，以提高你的網站的權威性和排名。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-監測和分析你的流量和排名">7. 監測和分析你的流量和排名<a href="#7-監測和分析你的流量和排名" class="hash-link" aria-label="Direct link to 7. 監測和分析你的流量和排名" title="Direct link to 7. 監測和分析你的流量和排名">​</a></h3><p>  監測和分析你的網站的流量和排名，以了解你的目標讀者是誰，以及他們如何找到你的內容。使用 Google Analytics 或其他分析工具來跟踪你的流量和排名，並根據這些數據調整你的 SEO 策略。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="結論">結論<a href="#結論" class="hash-link" aria-label="Direct link to 結論" title="Direct link to 結論">​</a></h2><p>使用 GitHub Actions 自動部署你的 Docusaurus 網誌是一個簡單而有效的方式，可以幫助你更輕鬆地管理和更新你的網誌。同時，優化你的網誌的 SEO 是一個重要的步驟，可以幫助你吸引更多的流量和讀者，並提高你的排名。遵循上述的技巧和策略，你可以建立一個成功的網誌，吸引更多的讀者和流量，並在搜索引擎上排名更高。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/git-hub-actions">GitHub Actions</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/docusaurus">Docusaurus</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/tech">Tech</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/my-site/en/blog/用 Colab 免費體驗 AI 繪圖">用 Colab 免費體驗 AI 繪圖</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-03-05T10:00:00.000Z" itemprop="datePublished">March 5, 2023</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/willismax.png" alt="Willis Chen"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Willis Chen</span></a></div><small class="avatar__subtitle" itemprop="description">Tech Instructor</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><a href="https://hackmd.io/DeV6o4MAS1e8QLQ-dD0cMA" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://hackmd.io/DeV6o4MAS1e8QLQ-dD0cMA/badge" alt="hackmd-github-sync-badge" class="img_ev3q"></a></p><p><img loading="lazy" src="https://hackmd.io/_uploads/S1NNdMMyh.png" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="您也想要自己用ai繪圖嗎">您也想要自己用AI繪圖嗎?<a href="#您也想要自己用ai繪圖嗎" class="hash-link" aria-label="Direct link to 您也想要自己用AI繪圖嗎?" title="Direct link to 您也想要自己用AI繪圖嗎?">​</a></h2><ul><li>生成式AI ( AIGC ) 是2023年的顯學，開源的 AI 繪圖模型越來越多，在<a href="https://civitai.com/" target="_blank" rel="noopener noreferrer">Civitai</a>有非常多網友創作(需註冊，許多有年齡限制)，您也想自己嘗試嗎? 網路上已經有許多自行下載執行 Python 程式與模型，但就需要自備 GPU 顯卡。</li><li>有網友在此 <a href="https://github.com/camenduru/stable-diffusion-webui-colab" target="_blank" rel="noopener noreferrer">GitHub</a> 整理諸多 AIGC 模型，而且可以用 Colab 直接產圖， Colab 是個可以免費暫時執行 GPU 運算的虛擬機，可執行 Python 及 Linux指令，您唯一要付出的是等待時間，一起來製作香香的圖吧。
<img loading="lazy" src="https://hackmd.io/_uploads/SJ2JuMGy2.png" class="img_ev3q"></li></ul><p>在這個範例，您只要兩個步驟就可以完成囉:</p><ol><li>打開以下 <a href="https://colab.research.google.com/drive/15NIShDq3Q7TH8ziwnAlQBFhKLTgqJO0m?usp=sharing" target="_blank" rel="noopener noreferrer">Colab<img loading="lazy" src="https://hackmd.io/_uploads/ryg0Yfzkh.png" class="img_ev3q"></a> ，一鍵執行以下程式碼，程式跑完會出現3個連結，點選第2個連結會開啟新分頁，是生圖的 UI 介面。
<img loading="lazy" src="https://hackmd.io/_uploads/SkBJbGGy2.png" class="img_ev3q"></li><li>在介面新介面的 Text2Img 有兩個文字框，可以輸入以下兩個正向、負向語詞(Prompt)，
<img loading="lazy" src="https://hackmd.io/_uploads/Hy5rCbMJ3.png" class="img_ev3q"><ul><li><em>正面語詞</em><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">8k, RAW photo, best quality, masterpiece:1.2), (realistic, photo-realistic:1.4), ultra-detailed, (Kpop idol),perfect detail ,  looking at viewer,make up,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>負面語詞<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">paintings,sketches, (worst quality:2), (low quality:2), (normal quality:2), lowres, normal quality, ((monochrome)), ((grayscale)), skin spots, acnes, skin blemishes, bad anatomy,(long hair:1.4),DeepNegative,(fat:1.2),facing away, looking away,tilted head, {Multiple people}, lowres,bad anatomy,bad hands, text, error, missing fingers,extra digit, fewer digits, cropped, worstquality, low quality, normal quality,jpegartifacts,signature, watermark, username,blurry,bad feet,cropped,poorly drawn hands,poorly drawn face,mutation,deformed,worst quality,low quality,normal quality,jpeg artifacts,signature,watermark,extra fingers,fewer digits,extra limbs,extra arms,extra legs,malformed limbs,fused fingers,too many fingers,long neck,cross-eyed,mutated hands,polar lowres,bad body,bad proportions,gross proportions,text,error,missing fingers,missing arms,missing legs,extra digit, extra arms, extra leg, extra foot,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li></ol><ul><li>還可以img2img繼續生圖
<img loading="lazy" src="https://hackmd.io/_uploads/H1V8Jfz1h.png" class="img_ev3q"></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="colab-遏阻了腳本指令濫用">Colab 遏阻了腳本指令濫用<a href="#colab-遏阻了腳本指令濫用" class="hash-link" aria-label="Direct link to Colab 遏阻了腳本指令濫用" title="Direct link to Colab 遏阻了腳本指令濫用">​</a></h2><ul><li>鑒於越來越多人使用 Colab 跑 stable-diffusion，已經對前述 WebUI 的腳本操作封鎖，您可以有限制的使用或付費，但最好的情況是自行下載在自己的電腦跑，如果電腦運算資源夠的話。</li><li>相信未來會有更適當的做法，像是 Bing 可以直接以文字繪圖(模型是 OpenAI 的 Dell.E)，或者使用 <a href="https://leonardo.ai/" target="_blank" rel="noopener noreferrer">Leonardo.ai</a> 就可以做出驚人的效果。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="參考">參考<a href="#參考" class="hash-link" aria-label="Direct link to 參考" title="Direct link to 參考">​</a></h2><ul><li><a href="https://www.kocpc.com.tw/archives/482754" target="_blank" rel="noopener noreferrer">https://www.kocpc.com.tw/archives/482754</a></li><li><a href="https://github.com/camenduru/stable-diffusion-webui-colab" target="_blank" rel="noopener noreferrer">https://github.com/camenduru/stable-diffusion-webui-colab</a></li><li><a href="https://leonardo.ai/" target="_blank" rel="noopener noreferrer">https://leonardo.ai/</a></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/aigc">AIGC</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/tech">Tech</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/my-site/en/blog/使用GitHubPages部署Docusaurus">使用GitHubPages部署Docusaurus</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-03-03T10:00:00.000Z" itemprop="datePublished">March 3, 2023</time> · <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/willismax.png" alt="Willis Chen"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://willismax.github.io/my-site/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Willis Chen</span></a></div><small class="avatar__subtitle" itemprop="description">Tech Instructor</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><img loading="lazy" src="https://hackmd.io/_uploads/ryKZyWv1h.png" class="img_ev3q"></p><p>如何使用 GitHub Pages 部署 Docusaurus，可以透過以下步驟，輕鬆地建立自己的網誌。</p><ul><li>步驟1. 事前準備一個 <a href="https://github.com/" target="_blank" rel="noopener noreferrer">GitHub</a> 帳號，並且安裝 <a href="https://git-scm.com/downloads" target="_blank" rel="noopener noreferrer">Git 工具</a> 及 <a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer">Node.js</a>。</li><li>步驟2. 創建新的 Repository，作為 GitHub Pages 靜態網頁存放用。</li><li>步驟3. 下載 Docusaurus 範本</li><li>步驟4. 安裝和測試 Docusaurus</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="步驟一事前準備">步驟一：事前準備<a href="#步驟一事前準備" class="hash-link" aria-label="Direct link to 步驟一：事前準備" title="Direct link to 步驟一：事前準備">​</a></h2><p>在開始之前，我們需要先確保以下條件都已經滿足：</p><ul><li>一個 GitHub 帳號，可以在 <a href="https://github.com/" target="_blank" rel="noopener noreferrer">GitHub</a> 上免費註冊。</li><li>安裝 Git 工具，可以從 <a href="https://git-scm.com/downloads" target="_blank" rel="noopener noreferrer">Git 官網</a> 下載安裝包進行安裝。</li><li>安裝 Node.js 和 npm，可以在 <a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer">Node.js 官網</a> 下載安裝包進行安裝。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="步驟二創建新的-repository">步驟二：創建新的 Repository<a href="#步驟二創建新的-repository" class="hash-link" aria-label="Direct link to 步驟二：創建新的 Repository" title="Direct link to 步驟二：創建新的 Repository">​</a></h2><p>首先，在 GitHub 上創建一個新的 Repository，用來存放網誌的代碼和部署文件。以下是創建 Repository 的步驟：</p><ol><li>登錄 GitHub，進入主頁面。</li><li>點擊右上角的 “+” 按鈕，然後選擇 “New repository”。</li><li>在創建 Repository 的頁面中，填寫 Repository 名稱、描述和設置等信息，然後點擊 “Create repository” 按鈕創建 Repository。</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="步驟三下載-docusaurus-範本">步驟三：下載 Docusaurus 範本<a href="#步驟三下載-docusaurus-範本" class="hash-link" aria-label="Direct link to 步驟三：下載 Docusaurus 範本" title="Direct link to 步驟三：下載 Docusaurus 範本">​</a></h2><p>接下來，我們需要下載 Docusaurus 的範本代碼，作為網誌的基礎。以下是下載 Docusaurus 範本的步驟：</p><ol><li>打開命令行工具，進入要存放 Docusaurus 範本的文件夾。</li><li>輸入以下命令，下載最新版本的 Docusaurus 範本：<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npx @docusaurus/init@latest init my-blog classic</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>執行命令後，Docusaurus 範本會被下載到當前目錄下的 my-blog 文件夾中。</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="步驟四安裝和測試-docusaurus">步驟四：安裝和測試 Docusaurus<a href="#步驟四安裝和測試-docusaurus" class="hash-link" aria-label="Direct link to 步驟四：安裝和測試 Docusaurus" title="Direct link to 步驟四：安裝和測試 Docusaurus">​</a></h2><p>在下載 Docusaurus 範本之後，我們需要進行安裝和測試，以確保網誌可以正常運行。以下是安裝和測試 Docusaurus 的步驟：</p><ol><li><p>進入 my-blog 文件夾，打開命令行工具。</p></li><li><p>輸入以下命令，安裝 Docusaurus 和相關的依賴：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>安裝完成後，輸入以下命令，啟動 Docusaurus 的本地測試服務：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>在 Github 上建立新的 repository</p><p>在 Github 上建立一個新的 repository，命名為 <code>{username}.github.io</code>，其中 <code>username</code> 是你的 Github 使用者名稱。例如，我的 Github 使用者名稱是 <code>chatgpt</code>，因此我會命名我的 repository 為 <code>chatgpt.github.io</code>。</p></li><li><p>將 Docusaurus 專案上傳至 Github</p><p>在你的電腦上開啟終端機（Terminal）或命令提示字元（Command Prompt），進入到 Docusaurus 專案的根目錄下，並執行以下指令：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git remote add origin git@github.com:{username}/{username}.github.io.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm run build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm run deploy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其中，<code>username</code> 是你的 Github 使用者名稱，請注意要改成你自己的。這些指令的作用如下：</p><ul><li><code>git init</code>：初始化 Git 儲存庫。</li><li><code>git remote add origin git@github.com:{username}/{username}.github.io.git</code>：設定 Git 儲存庫的遠端位置。</li><li><code>npm run build</code>：建立 Docusaurus 專案的靜態網頁檔案。</li><li><code>npm run deploy</code>：將靜態網頁檔案上傳至 Github。</li></ul><p>在執行 <code>npm run deploy</code> 的時候，會需要你輸入 Github 的使用者名稱和密碼（或是 Personal Access Token）。請輸入正確的資訊後，等待上傳完成。</p></li><li><p>檢查網站是否正常運作</p><p>完成上傳後，打開瀏覽器，輸入 <code>https://{username}.github.io</code>，其中 <code>username</code> 是你的 Github 使用者名稱，就可以看到你的 Docusaurus 網站了！如果你看到了你的網站，那就代表部署成功了。</p></li><li><p>編輯 Docusaurus 網站</p><p>現在，你可以開始編輯你的 Docusaurus 網站了。編輯完成後，只需要執行以下指令：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git add .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git commit -m &quot;Update website&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git push origin main</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其中，<code>Update website</code> 是你的提交訊息，你可以自己替換成任何訊息。執行這些指令後，你的修改就會自動更新到你的 Github Pages 上了。</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="結語">結語<a href="#結語" class="hash-link" aria-label="Direct link to 結語" title="Direct link to 結語">​</a></h2><p>以上使用 Github Pages 部署 Docusaurus 教學，希望能幫助到您。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/git-hub-actions">GitHub Actions</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/docusaurus">Docusaurus</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/my-site/en/blog/tags/tech">Tech</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022-2025 willismax. Built with Docusaurus.</div></div></div></footer></div>
<script src="/my-site/en/assets/js/runtime~main.2183db32.js"></script>
<script src="/my-site/en/assets/js/main.97c40906.js"></script>
</body>
</html>