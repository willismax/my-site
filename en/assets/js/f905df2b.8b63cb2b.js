"use strict";(self.webpackChunkmy_site=self.webpackChunkmy_site||[]).push([[6381],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>g});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),m=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},s=function(e){var t=m(e.components);return a.createElement(o.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),u=m(n),d=r,g=u["".concat(o,".").concat(d)]||u[d]||c[d]||i;return n?a.createElement(g,l(l({ref:t},s),{},{components:n})):a.createElement(g,l({ref:t},s))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=d;var p={};for(var o in t)hasOwnProperty.call(t,o)&&(p[o]=t[o]);p.originalType=e,p[u]="string"==typeof e?e:r,l[1]=p;for(var m=2;m<i;m++)l[m]=n[m];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3229:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>c,frontMatter:()=>i,metadata:()=>p,toc:()=>m});var a=n(7462),r=(n(7294),n(3905));const i={},l="Day 21 : \u6a21\u578b\u512a\u5316 - \u526a\u679d Pruning",p={unversionedId:"2021ITHome\u9435\u4eba\u8cfd\u300c\u5f9eAI\u843d\u5730\u8ac7MLOps\u300d/\u8ac7\u5be6\u8e10-\u5efa\u6a21 Modeling/Day 21",id:"2021ITHome\u9435\u4eba\u8cfd\u300c\u5f9eAI\u843d\u5730\u8ac7MLOps\u300d/\u8ac7\u5be6\u8e10-\u5efa\u6a21 Modeling/Day 21",title:"Day 21 : \u6a21\u578b\u512a\u5316 - \u526a\u679d Pruning",description:"tags: MLOps",source:"@site/docs/2021ITHome\u9435\u4eba\u8cfd\u300c\u5f9eAI\u843d\u5730\u8ac7MLOps\u300d/\u8ac7\u5be6\u8e10-\u5efa\u6a21 Modeling/Day 21.md",sourceDirName:"2021ITHome\u9435\u4eba\u8cfd\u300c\u5f9eAI\u843d\u5730\u8ac7MLOps\u300d/\u8ac7\u5be6\u8e10-\u5efa\u6a21 Modeling",slug:"/2021ITHome\u9435\u4eba\u8cfd\u300c\u5f9eAI\u843d\u5730\u8ac7MLOps\u300d/\u8ac7\u5be6\u8e10-\u5efa\u6a21 Modeling/Day 21",permalink:"/my-site/en/docs/2021ITHome\u9435\u4eba\u8cfd\u300c\u5f9eAI\u843d\u5730\u8ac7MLOps\u300d/\u8ac7\u5be6\u8e10-\u5efa\u6a21 Modeling/Day 21",draft:!1,editUrl:"https://github.com/willismax/my-site/blob/main/docs/2021ITHome\u9435\u4eba\u8cfd\u300c\u5f9eAI\u843d\u5730\u8ac7MLOps\u300d/\u8ac7\u5be6\u8e10-\u5efa\u6a21 Modeling/Day 21.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Day 20 : \u6a21\u578b\u512a\u5316 - \u8a13\u7df4\u5f8c\u91cf\u5316 Post Training Quantization",permalink:"/my-site/en/docs/2021ITHome\u9435\u4eba\u8cfd\u300c\u5f9eAI\u843d\u5730\u8ac7MLOps\u300d/\u8ac7\u5be6\u8e10-\u5efa\u6a21 Modeling/Day 20"},next:{title:"Day 22 : \u6a21\u578b\u512a\u5316 - \u77e5\u8b58\u84b8\u993e Knowledge Distillation",permalink:"/my-site/en/docs/2021ITHome\u9435\u4eba\u8cfd\u300c\u5f9eAI\u843d\u5730\u8ac7MLOps\u300d/\u8ac7\u5be6\u8e10-\u5efa\u6a21 Modeling/Day 22"}},o={},m=[{value:"tags: <code>MLOps</code>",id:"tags-mlops",level:6},{value:"\u4ec0\u9ebc\u662f\u526a\u679d Pruning",id:"\u4ec0\u9ebc\u662f\u526a\u679d-pruning",level:2},{value:"\u6a21\u578b\u512a\u5316\u526a\u679d\u5be6\u4f5c",id:"\u6a21\u578b\u512a\u5316\u526a\u679d\u5be6\u4f5c",level:2},{value:"\u5efa\u7acb\u57fa\u672c\u6a21\u578b",id:"\u5efa\u7acb\u57fa\u672c\u6a21\u578b",level:3},{value:"\u4f7f\u7528\u526a\u679d\u8abf\u6574\u6a21\u578b",id:"\u4f7f\u7528\u526a\u679d\u8abf\u6574\u6a21\u578b",level:3},{value:"\u89c0\u5bdf\u526a\u679d\u524d\u5f8c\u7684\u6a21\u578b\u6b0a\u91cd weight \u8b8a\u5316",id:"\u89c0\u5bdf\u526a\u679d\u524d\u5f8c\u7684\u6a21\u578b\u6b0a\u91cd-weight-\u8b8a\u5316",level:3},{value:"\u526a\u679d\u5f8c\u79fb\u9664\u5305\u88dd\u5c64",id:"\u526a\u679d\u5f8c\u79fb\u9664\u5305\u88dd\u5c64",level:3},{value:"\u6a21\u578b\u58d3\u7e2e3\u500d\u8853",id:"\u6a21\u578b\u58d3\u7e2e3\u500d\u8853",level:3},{value:"\u6a21\u578b\u58d3\u7e2e10\u500d\u8853",id:"\u6a21\u578b\u58d3\u7e2e10\u500d\u8853",level:3},{value:"\u5c0f\u7d50",id:"\u5c0f\u7d50",level:2},{value:"\u53c3\u8003",id:"\u53c3\u8003",level:2}],s={toc:m},u="wrapper";function c(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"day-21--\u6a21\u578b\u512a\u5316---\u526a\u679d-pruning"},"Day 21 : \u6a21\u578b\u512a\u5316 - \u526a\u679d Pruning"),(0,r.kt)("h6",{id:"tags-mlops"},"tags: ",(0,r.kt)("inlineCode",{parentName:"h6"},"MLOps")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://ithelp.ithome.com.tw/users/20121130/ironman/4015"},(0,r.kt)("img",{parentName:"a",src:"https://d1dwq032kyr03c.cloudfront.net/images/ironman_sticker/13/ai-and-data.png?sticker",alt:null,title:"\u7b2c 13 \u5c46\u9435\u4eba\u8cfd\u934a\u6210"}),"\u7b2c 13 \u5c46\u9435\u4eba\u8cfd\u934a\u6210"),"\n",(0,r.kt)("a",{parentName:"p",href:"https://ithelp.ithome.com.tw/articles/10267328"},(0,r.kt)("img",{parentName:"a",src:"https://img.shields.io/badge/iThome%E9%90%B5%E4%BA%BA%E8%B3%BD2021-%E5%A8%81%E5%88%A9%E6%96%AF-blue",alt:null}))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u8aaa\u53ef\u4ee5\u8b93\u6a21\u578b\u7e2e\u5c0f10\u500d\uff0c\u7cbe\u5ea6\u9084\u7dad\u6301\u6c34\u6e96\uff0c\u9019\u662f\u4ec0\u9ebc\u5deb\u8853?"),(0,r.kt)("li",{parentName:"ul"},"\u5ef6\u7e8c ",(0,r.kt)("a",{parentName:"li",href:"https://ithelp.ithome.com.tw/articles/10267328"},"Day 20")," \u7684\u6a21\u578b\u512a\u5316\u4f5c\u6cd5\uff0c\u672c\u6b21\u518d\u7d50\u5408\u526a\u679d\u6280\u8853\u505a\u5230\u66f4\u8f15\u91cf\u7684\u6a21\u578b\u6548\u679c\u3002")),(0,r.kt)("h2",{id:"\u4ec0\u9ebc\u662f\u526a\u679d-pruning"},"\u4ec0\u9ebc\u662f\u526a\u679d Pruning"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.tensorflow.org/model_optimization/guide/pruning/pruning_with_keras"},"\u526a\u679d Pruning")," \u5c07\u7121\u95dc\u7dca\u8981\u7684\u6b0a\u91cd (weight) \u522a\u9664\u6b78\u96f6\uff0c\u5728\u58d3\u7e2e\u6642\u56e0\u70ba\u7a00\u758f\u77e9\u9663\u7684\u7279\u6027\uff0c\u80fd\u660e\u986f\u7e2e\u5c0f\u5c3a\u5bf8\uff0c\u53ef\u4ee5\u58d3\u7e2e\u5230\u539f\u4f86 1/3\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u7d93\u904e\u526a\u679d\u518d\u91cf\u5316\u7684\u6a21\u578b\uff0c\u751a\u81f3\u53ef\u4ee5\u7e2e\u5c0f\u7684\u539f\u4f86 1/10 \u5927\u5c0f\u3002")),(0,r.kt)("h2",{id:"\u6a21\u578b\u512a\u5316\u526a\u679d\u5be6\u4f5c"},"\u6a21\u578b\u512a\u5316\u526a\u679d\u5be6\u4f5c"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Colab \u652f\u63f4 ",(0,r.kt)("a",{parentName:"p",href:"https://colab.research.google.com/drive/1QQ0rZ9f18APlBy23M3-hfTMb4a5LHFtw"},(0,r.kt)("img",{parentName:"a",src:"https://i.imgur.com/pQnQ4tG.png",alt:null})),"\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u672c\u793a\u7bc4\u63a1\u7528 Tensorflow \u6a21\u578b\u512a\u5316\u6a21\u7d44\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"prune_low_magnitude()")," \uff0c\u53ef\u4ee5\u5c07 Keras \u6a21\u578b\u5728\u8a13\u7df4\u671f\u9593\u5c07\u5f71\u97ff\u8f03\u5c0f\u7684\u6b0a\u91cd\u4fee\u526a\u6b78\u96f6\u3002"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},"!pip install tensorflow\\_model\\_optimization\n\n")))),(0,r.kt)("h3",{id:"\u5efa\u7acb\u57fa\u672c\u6a21\u578b"},"\u5efa\u7acb\u57fa\u672c\u6a21\u578b"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u6211\u5011\u7684\u57fa\u672c\u6a21\u578b\u4ee5",(0,r.kt)("a",{parentName:"p",href:"https://colab.research.google.com/drive/1ukgVrMdtWjpReIygWHJ7-Lcw61Lv5kAO"},"\u8a13\u7df4\u5f8c\u91cf\u5316")," \u76f8\u540c\u7684\u57fa\u6e96\u6a21\u578b\u9032\u884c\u512a\u5316\uff0c\u6a21\u578b\u4e00\u6a23\u63a1\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"tf.keras.datasets.mnist"),"\uff0c\u7528CNN\u9032\u884c\u5efa\u6a21\u3002"),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/JARv0UH.png",alt:null})),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},"ACCURACY:\n{'baseline Keras model': 0.9574999809265137}\n\nMODEL_SIZE:\n{'baseline h5': 98136} \n\n")))),(0,r.kt)("h3",{id:"\u4f7f\u7528\u526a\u679d\u8abf\u6574\u6a21\u578b"},"\u4f7f\u7528\u526a\u679d\u8abf\u6574\u6a21\u578b"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u9032\u884c\u526a\u679d\uff0c\u53e6\u5916\u56e0\u70ba\u526a\u679d\u6a21\u578b\u65b9\u6cd5\u6709\u589e\u52a0\u4e00\u5c64\u5305\u88dd\u5c64\uff0c\u6458\u8981\u986f\u793a\u7684\u53c3\u6578\u6703\u589e\u52a0\u3002"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# Get the pruning method\nprune_low_magnitude = tfmot.sparsity.keras.prune_low_magnitude\n\n# Compute end step to finish pruning after 2 epochs.\nbatch_size = 128\nepochs = 2\nvalidation_split = 0.1\n\nnum_images = train_images.shape[0] * (1 - validation_split)\nend_step = np.ceil(num_images / batch_size).astype(np.int32) * epochs\n\n# Define pruning schedule.\npruning_params = {\n    'pruning_schedule': tfmot.sparsity.keras.PolynomialDecay(\n        initial_sparsity=0.50,\n        final_sparsity=0.80,\n        begin_step=0,\n        end_step=end_step)\n    }\n\n# Pass in the trained baseline model\nmodel_for_pruning = prune_low_magnitude(\n    baseline_model, \n    **pruning_params\n    )\n\n# `prune_low_magnitude` requires a recompile.\nmodel_for_pruning.compile(\n    optimizer='adam',\n    loss='sparse_categorical_crossentropy',\n    metrics=['accuracy']\n    )\n\nmodel_for_pruning.summary()\n\n")),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/gNUcYom.png",alt:null}))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u53c3\u6578\u6578\u91cf\u589e\u52a0\u4e86\u3002"))),(0,r.kt)("h3",{id:"\u89c0\u5bdf\u526a\u679d\u524d\u5f8c\u7684\u6a21\u578b\u6b0a\u91cd-weight-\u8b8a\u5316"},"\u89c0\u5bdf\u526a\u679d\u524d\u5f8c\u7684\u6a21\u578b\u6b0a\u91cd weight \u8b8a\u5316"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u526a\u679d\u524d\uff0c\u6709\u4e9b\u5fae\u5f31\u7684\u6b0a\u91cd\u3002",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/QTWCL3H.png",alt:null}))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u91cd\u65b0\u8a13\u7df4\u6a21\u578b\u3002\u4e26\u5728 Callback \u589e\u52a0 ",(0,r.kt)("inlineCode",{parentName:"p"},"tfmot.sparsity.keras.UpdatePruningStep()")," \u53c3\u6578\u3002"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# Callback to update pruning wrappers at each step\ncallbacks=[tfmot.sparsity.keras.UpdatePruningStep()]\n\n# Train and prune the model\nmodel_for_pruning.fit(\n    train_images, \n    train_labels,\n    epochs=epochs, \n    validation_split=validation_split,\n    callbacks=callbacks\n    )\n\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u91cd\u65b0\u8a13\u7df4\u5f8c\u5df2\u4fee\u526a\uff0c\u89c0\u5bdf\u540c\u4e00\u5c64\u7684\u6b0a\u91cd\u8b8a\u5316\uff0c\u8a31\u591a\u4e0d\u91cd\u8981\u7684\u6b0a\u91cd\u5df2\u6b78\u96f6\u3002",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/7v40hXw.png",alt:null})))),(0,r.kt)("h3",{id:"\u526a\u679d\u5f8c\u79fb\u9664\u5305\u88dd\u5c64"},"\u526a\u679d\u5f8c\u79fb\u9664\u5305\u88dd\u5c64"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u526a\u679d\u4e4b\u5f8c\uff0c\u60a8\u53ef\u4ee5\u7528tfmot.sparsity.keras.strip_pruning()\u522a\u9664\u5305\u88dd\u5c64\u4ee5\u5177\u6709\u8207\u57fa\u7dda\u6a21\u578b\u76f8\u540c\u7684\u5c64\u548c\u53c3\u6578\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u6b64\u65b9\u6cd5\u4e5f\u6709\u52a9\u65bc\u4fdd\u5b58\u6a21\u578b\u4e26\u5c0e\u51fa\u70ba*.tflite\u6a94\u6848\u683c\u5f0f\u3002",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/zRriN8g.png",alt:null}))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u526a\u679d\u5f8c\u5c1a\u672a\u58d3\u7e2e\u7684\u6a94\u6848\uff0c\u6a21\u578b\u6a94\u6848\u5927\u5c0f\u8207\u539f\u5148\u4e00\u81f4\uff0c\u9019\u4e5f\u633a\u5408\u7406\u7684\u7562\u7adf\u90fd\u9084\u5360\u8457\u4f4d\u5b50\u3002"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},"MODEL_SIZE:\n{'baseline h5': 98136,\n'pruned non quantized h5': 98136} \n\n")))),(0,r.kt)("h3",{id:"\u6a21\u578b\u58d3\u7e2e3\u500d\u8853"},"\u6a21\u578b\u58d3\u7e2e3\u500d\u8853"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u526a\u679d\u5f8c\u7684\u6a21\u578b\u518d\u58d3\u7e2e\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u58d3\u7e2e\u5f8c\u6a94\u6848\u5927\u5c0f\u7d04\u70ba\u539f\u672c1/3\uff0c\u9019\u662f\u56e0\u70ba\u526a\u679d\u5f8c\u6b78\u96f6\u7684\u6b0a\u91cd\u53ef\u4ee5\u66f4\u6709\u6548\u7684\u58d3\u7e2e\u3002"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},"import tempfile\nimport zipfile\n\n_, zipped_file = tempfile.mkstemp('.zip')\nwith zipfile.ZipFile(zipped_file, 'w', compression=zipfile.ZIP_DEFLATED) as f:\n    f.write('pruned_model.h5')\n\n\nMODEL_SIZE['pruned non quantized h5'] = get_gzipped_model_size('pruned_model.h5')\n\n")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},"MODEL_SIZE:\n{'baseline h5': 98136,\n'pruned non quantized h5': 25665} \n\n")))),(0,r.kt)("h3",{id:"\u6a21\u578b\u58d3\u7e2e10\u500d\u8853"},"\u6a21\u578b\u58d3\u7e2e10\u500d\u8853"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u73fe\u5728\u5617\u8a66\u5c07\u5df2\u7cbe\u526a\u679d\u5f8c\u7684\u6a21\u578b\u518d\u91cf\u5316\u3002")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u91cf\u5316\u539f\u672c\u5c31\u6703\u7e2e\u5c0f\u7d043\u500d\uff0c\u5c07\u526a\u679d\u6a21\u578b\u58d3\u7e2e\u5f8c\u518d\u91cf\u5316\uff0c\u8207\u57fa\u672c\u6a21\u578b\u76f8\u6bd4\uff0c\u9019\u4f7f\u6a21\u578b\u5927\u5c0f\u6e1b\u5c11\u4e86\u7d04\u70ba\u539f\u672c1/10\uff0c\u800c\u4e14\u7cbe\u5ea6\u9084\u80fd\u7dad\u6301\u6c34\u6e96\u3002"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# \u526a\u679d\u58d3\u7e2e\u5f8c\u518d\u91cf\u5316\u6a21\u578b\nconverter = tf.lite.TFLiteConverter.from_keras_model(baseline_model)\nconverter.optimizations = [tf.lite.Optimize.DEFAULT]\n\ntflite_model = converter.convert()\n\nwith open('pruned_quantized.tflite', 'wb') as f:\n    f.write(tflite_model)\n")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},"MODEL_SIZE:\n{'baseline h5': 98136,\n 'pruned non quantized h5': 25665,\n 'pruned quantized tflite': 8129}\n\n ACCURACY\n {'baseline Keras model': 0.9574999809265137,\n 'pruned and quantized tflite': 0.9683,\n 'pruned model h5': 0.9685999751091003}\n")))),(0,r.kt)("h2",{id:"\u5c0f\u7d50"},"\u5c0f\u7d50"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u672c\u7bc7\u793a\u7bc4\u6e1b\u5c11\u6a21\u578b\u6a94\u6848\u5927\u5c0f: \u526a\u679d\u3001\u58d3\u7e2e\u518d\u91cf\u5316\uff0c\u539f\u672c\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},".h5")," \u6a94\u6848\u8f49\u63db\u70ba TensorFlow Lite \u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"*.tflite")," \u6a94\u6848\u53ef\u4ee5\u662f\u539f\u672c\u7684 1/10 \uff0c\u76f8\u7576\u795e\u5947\uff0c\u4e5f\u63a8\u85a6\u7d66\u6709\u9700\u8981\u7684\u60a8\u3002")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://ithelp.ithome.com.tw/images/emoticon/emoticon12.gif",alt:"/images/emoticon/emoticon12.gif"})),(0,r.kt)("h2",{id:"\u53c3\u8003"},"\u53c3\u8003"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.tensorflow.org/lite/performance/post_training_quantization"},"TensorFlow Lite\u5b98\u65b9\u7bc4\u4f8b"),"\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.tensorflow.org/model_optimization/guide/pruning/comprehensive_guide"},"Pruning Comprehensive Guide")),(0,r.kt)("li",{parentName:"ul"},"\u555f\u767c\u65bc ",(0,r.kt)("a",{parentName:"li",href:"https://www.coursera.org/learn/machine-learning-modeling-pipelines-in-production"},"Machine Learning Modeling Pipelines in Production")," \u8ab2\u7a0b\u3002")))}c.isMDXComponent=!0}}]);