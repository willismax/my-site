<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://willismax.github.io/my-site/blog</id>
    <title>Will is MAX Blog</title>
    <updated>2023-09-03T10:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://willismax.github.io/my-site/blog"/>
    <subtitle>Will is MAX Blog</subtitle>
    <icon>https://willismax.github.io/my-site/img/favicon.ico</icon>
    <rights>Copyright © 2023 willismax.</rights>
    <entry>
        <title type="html"><![CDATA[Selenium升級4.x版修正筆記]]></title>
        <id>https://willismax.github.io/my-site/blog/Selenium升級4.x版修正筆記</id>
        <link href="https://willismax.github.io/my-site/blog/Selenium升級4.x版修正筆記"/>
        <updated>2023-09-03T10:00:00.000Z</updated>
        <summary type="html"><![CDATA[- Selenium 是一個自動化測試框架，專門用於測試 Web 應用程式。作為一位經常需要隨著套件更新來調整教學內容的講師。將針對最近升級至 4.x 版本的 Selenium 進行比較，以及如何解決版本更新的程式碼問題。]]></summary>
        <content type="html"><![CDATA[<ul><li>Selenium 是一個自動化測試框架，專門用於測試 Web 應用程式。作為一位經常需要隨著套件更新來調整教學內容的講師。將針對最近升級至 4.x 版本的 Selenium 進行比較，以及如何解決版本更新的程式碼問題。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="預期-selenium-版本更新會遇到的狀況">預期 Selenium 版本更新會遇到的狀況<a href="#預期-selenium-版本更新會遇到的狀況" class="hash-link" aria-label="預期 Selenium 版本更新會遇到的狀況的直接連結" title="預期 Selenium 版本更新會遇到的狀況的直接連結">​</a></h2><p>在過去，我預期會遇到以下幾種情況：</p><ul><li>需要更新至新版的 webdriver。</li><li>程式參數更新，需要查看 log 以解決問題。</li></ul><p>然而，升級至 Selenium 4.x 後，我發現了一些令人驚喜的改變。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-webdriver管理更聰明了">1. webdriver管理更聰明了<a href="#1-webdriver管理更聰明了" class="hash-link" aria-label="1. webdriver管理更聰明了的直接連結" title="1. webdriver管理更聰明了的直接連結">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="舊版流程">舊版流程<a href="#舊版流程" class="hash-link" aria-label="舊版流程的直接連結" title="舊版流程的直接連結">​</a></h3><p>在 Selenium 4.x 版本之前，安裝 Selenium 是一件相對繁瑣的事情。你需要：</p><ol><li>用 <code>pip install</code> 安裝 Selenium 主要套件。<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip install selenium</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>然後，你還需要手動<a href="https://www.selenium.dev/documentation/webdriver/getting_started/install_drivers/" target="_blank" rel="noopener noreferrer">下載</a>與你的 Chrome 版本相對應的 WebDriver。</li><li>解壓縮 WebDriver，然後將其放入指定目錄。</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="過渡版本--需額外的-webdriver_manager">過渡版本- 需額外的 webdriver_manager<a href="#過渡版本--需額外的-webdriver_manager" class="hash-link" aria-label="過渡版本- 需額外的 webdriver_manager的直接連結" title="過渡版本- 需額外的 webdriver_manager的直接連結">​</a></h3><ul><li><p>在2023年之前的一段時間簡化了上述流程，透過<code>pip install webdriver_manager</code>直接安裝好對應的測試瀏覽器，不用找對應的瀏覽器與版本，但需要引入webdriver_manager套件。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip install webdriver_manager</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>然後，使用webdriver_manager的範例如下:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> selenium </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> webdriver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> webdriver_manager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">chrome </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> ChromeDriverManager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">options </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> webdriver</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ChromeOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># options.add_argument('--headless')</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> webdriver</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Chrome</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ChromeDriverManager</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">install</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"https://www.google.com"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">save_screenshot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"google_homepage.png"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">quit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="新版流程">新版流程<a href="#新版流程" class="hash-link" aria-label="新版流程的直接連結" title="新版流程的直接連結">​</a></h3><ul><li><p>現在，在 Selenium 4.x 版本，你只需執行一個指令即可：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip install selenium</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>這個改變意味著，你不再需要手動去管理 WebDriver，Selenium 會為你處理一切。</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-seleniumwebdriverchrome參數簡化">2. selenium.webdriver.Chrome()`參數簡化<a href="#2-seleniumwebdriverchrome參數簡化" class="hash-link" aria-label="2. selenium.webdriver.Chrome()`參數簡化的直接連結" title="2. selenium.webdriver.Chrome()`參數簡化的直接連結">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="舊版用法">舊版用法<a href="#舊版用法" class="hash-link" aria-label="舊版用法的直接連結" title="舊版用法的直接連結">​</a></h3><ul><li><p>在舊版中，初始化 Chrome WebDriver 的代碼通常會看起來像這樣：</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> selenium </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> webdriver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">options </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> webdriver</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ChromeOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_argument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'--headless'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> webdriver</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Chrome</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'path/to/chromedriver'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> chrome_options</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="新版用法">新版用法<a href="#新版用法" class="hash-link" aria-label="新版用法的直接連結" title="新版用法的直接連結">​</a></h3><ul><li><p>在新版中，由於 WebDriver 已經被整合，你可以簡單地這樣做：</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> selenium </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> webdriver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">options </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> webdriver</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ChromeOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_argument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'--headless'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> webdriver</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Chrome</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="selenium-搜尋-ptt-指定列表範例">Selenium 搜尋 PTT 指定列表範例<a href="#selenium-搜尋-ptt-指定列表範例" class="hash-link" aria-label="Selenium 搜尋 PTT 指定列表範例的直接連結" title="Selenium 搜尋 PTT 指定列表範例的直接連結">​</a></h2><p>如你所見，新版省去了指定 chromedriver 路徑的需求，使得代碼更為簡潔，最後分享一個這學期調整的selenium範例:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> selenium </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> webdriver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> selenium</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">webdriver </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Chrome</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> selenium</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">webdriver</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">chrome</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">options </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Options</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> bs4 </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> BeautifulSoup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">make_webdriver</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Chrome</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> create_options</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  driver </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Chrome</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#簡化參數</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> driver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">create_options</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Options</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_argument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"--headless"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_argument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'--no-sandbox'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_argument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'--disable-dev-shm-usage'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_argument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"--start-maximized"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> options</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get_ptt_board_list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">board</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">list</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:#e3116c">f"https://www.ptt.cc/bbs/</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">board</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">/index.html"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  wd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> make_webdriver</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  wd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">url</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">url</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  soup </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> BeautifulSoup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">page_source</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">"html.parser"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  links </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> soup</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'div.title &gt; a'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">'title'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> link</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_text</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">'href'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:#e3116c">f'https://www.ptt.cc</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">link</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">get</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation string" style="color:#e3116c">"href"</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> link </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> links </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'公告'</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> link</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get_text</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  wd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">quit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> res</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'__main__'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> get_ptt_board_list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'movie'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="小結">小結<a href="#小結" class="hash-link" aria-label="小結的直接連結" title="小結的直接連結">​</a></h2><p>Selenium 4.x 版本帶來了許多便利性的提升，尤其是在 WebDriver 管理和參數簡化方面。這對於減少教學備課的負擔以及提高自動化測試的效率都有很大的幫助。</p><p>我個人非常推薦升級至這個版本，以便能夠利用這些新的特性和優化。</p>]]></content>
        <author>
            <name>Willis Chen</name>
            <uri>https://willismax.github.io/my-site/</uri>
        </author>
        <category label="Selenium" term="Selenium"/>
        <category label="Python" term="Python"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[用PlayWright抓取動態網站資料]]></title>
        <id>https://willismax.github.io/my-site/blog/用PlayWright抓取動態網站資料</id>
        <link href="https://willismax.github.io/my-site/blog/用PlayWright抓取動態網站資料"/>
        <updated>2023-07-03T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[在這篇文章中，將探討如何使用Python的PlayWright模組來抓取巴哈姆特動漫瘋的彈幕數據。]]></summary>
        <content type="html"><![CDATA[<p>在這篇文章中，將探討如何使用Python的PlayWright模組來抓取巴哈姆特動漫瘋的彈幕數據。
目標如下:</p><ul><li>認識PlayWright</li><li>如何安裝PlayWright。</li><li>如何利用PlayWright控制網頁行為。</li><li>如何改寫腳本，抓取、整理和儲存需要的數據。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="什麼是playwright">什麼是PlayWright?<a href="#什麼是playwright" class="hash-link" aria-label="什麼是PlayWright?的直接連結" title="什麼是PlayWright?的直接連結">​</a></h2><p><a href="https://github.com/microsoft/playwright-python" target="_blank" rel="noopener noreferrer">PlayWright</a> 是Microsoft推出的開源專案，是一個Python用戶端，讓我們能夠自動化Web瀏覽器的行為，包括Chrome, Firefox, 和Safari等主流瀏覽器。你可以使用它來進行網站測試、抓取資料，甚至製作自動化的網頁腳本。透過PlayWright，你能控制整個瀏覽過程，包括產生彈幕等動態內容。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="如何安裝playwright">如何安裝PlayWright<a href="#如何安裝playwright" class="hash-link" aria-label="如何安裝PlayWright的直接連結" title="如何安裝PlayWright的直接連結">​</a></h2><p>安裝PlayWright相當簡單，只需要在你的命令列工具 (例如：終端機或Command Prompt) 輸入以下命令即可：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; pip install playwright</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="如何利用playwright控制網頁行為">如何利用PlayWright控制網頁行為<a href="#如何利用playwright控制網頁行為" class="hash-link" aria-label="如何利用PlayWright控制網頁行為的直接連結" title="如何利用PlayWright控制網頁行為的直接連結">​</a></h2><p>首先，我們需要啟動一個PlayWright的實例，並且以我們選定的瀏覽器來執行我們的程式。以下是一個以Chromium瀏覽器為例的程式碼，同理也可以使用webkit瀏覽器：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; python -m playwright codegen -b chromium</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>執行上述命令後，您將開啟一個Chromium瀏覽器並開始與其互動。你的每一個操作，都會自動生成對應的Python程式碼。</p><p>codegen命令包含一些可用的參數，例如：</p><ul><li><code>--target</code>: 設定你的程式語言，如 python、JavaScript等。</li><li><code>-o</code>: 指定存放生成程式碼的檔案名稱。</li><li><code>-b</code>: 選擇你想要使用的瀏覽器，如 chromium、firefox或webkit。</li></ul><p>以下是一個實際的例子，使用webkit瀏覽器抓取巴哈姆特動漫瘋網站並將程式碼儲存在damun.py文件中：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; python -m playwright codegen --target python -o damun.py -b webkit https://ani.gamer.com.tw/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>此時的<code>damun.py</code>內容參考如下:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> playwright</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sync_api </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Playwright</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sync_playwright</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> bs4 </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> BeautifulSoup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> sys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">playwright</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Playwright</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    browser </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> playwright</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">chromium</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">launch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">headless</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    context </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> browser</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">new_context</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    page </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">new_page</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    page</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">goto</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f"https://ani.gamer.com.tw/animeVideo.php?sn=</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">sn</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># screenshot</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    page</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">screenshot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'ani.jpg'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> full_page </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">### 稍後加上網頁解析</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">### 稍後加上內容萃取</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">### 稍後加上資料儲存</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    page</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ---------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    browser</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> sync_playwright</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> playwright</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">playwright</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">argv</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="修改playwright腳本">修改PlayWright腳本<a href="#修改playwright腳本" class="hash-link" aria-label="修改PlayWright腳本的直接連結" title="修改PlayWright腳本的直接連結">​</a></h2><p>為了包含抓取後的解析及整理，可以在前面透過點選產製的damun.py腳本中，新增解析的程式</p><ul><li><p>網頁解析: <code>page</code>內容為HTML，將其轉換成<code>BeautifulSoup</code>物件，方便後續操作。</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> bs4 </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> BeautifulSoup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">soup </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> BeautifulSoup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">page</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'lxml'</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>內容萃取:
這邊藏的一個很關鍵的做法，用For迴圈直接將結果設計為JSON like的Python Dictionary格式。</p><ul><li>每次回圈的過程一次性的將擷取對象整理好。<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># for-loops</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> li </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> soup</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'.sub-list-li'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    k</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'userid'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> li</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select_one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'.name &gt; span'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    k</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'text'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> li</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select_one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'.sub_content'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    k</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'msg_time'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> li</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select_one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'b'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">k</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>如果你熟悉列表推導式(list comprehension)，以下改寫更為直觀:<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">'userid'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> li</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select_one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'.name &gt; span'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">'text'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> li</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select_one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'.sub_content'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">'msg_time'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> li</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select_one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'b'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> li </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> soup</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'.sub-list-li'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>資料儲存: 將Dict樣式存成JSON格式，方便後續運用。</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> </span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f'damun_</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">sn</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">.json'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'w'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dump</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>最終的<code>damun.py</code>腳本內容:</p></li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> playwright</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sync_api </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Playwright</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sync_playwright</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> bs4 </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> BeautifulSoup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> sys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">playwright</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Playwright</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    browser </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> playwright</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">chromium</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">launch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">headless</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    context </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> browser</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">new_context</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    page </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">new_page</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    page</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">goto</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f"https://ani.gamer.com.tw/animeVideo.php?sn=</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">sn</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># screenshot</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    page</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">screenshot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'ani.jpg'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> full_page </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 網頁解析</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    soup </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> BeautifulSoup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">page</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'lxml'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 內容萃取(列表推導式)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">'userid'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> li</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select_one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'.name &gt; span'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">'text'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> li</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select_one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'.sub_content'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">'msg_time'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> li</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select_one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'b'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> li </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> soup</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'.sub-list-li'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># 資料儲存(JSON檔)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> </span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f'damun_</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">sn</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">.json'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'w'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dump</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    page</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ---------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    browser</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> res</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> sync_playwright</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> playwright</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">playwright</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">argv</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="執行playwright腳本">執行playwright腳本<a href="#執行playwright腳本" class="hash-link" aria-label="執行playwright腳本的直接連結" title="執行playwright腳本的直接連結">​</a></h2><p>接下來，執行我們生成的腳本，可以在命令列執行腳本。</p><blockquote><p>33846為動畫的編號，可以更換成想要分析的動畫序號。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python damun.py 33846</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然後，使用Python的<code>ast</code>模組將結果轉換為Python對象。以下是一個實際的例子：</p></blockquote><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 此欄位內容於ipynb執行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">res = ! python damun.py 33846</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import ast</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">res = [ast.literal_eval(i) for i in res]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(res)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="將內容存為pagejson">將內容存為<code>page.json</code><a href="#將內容存為pagejson" class="hash-link" aria-label="將內容存為pagejson的直接連結" title="將內容存為pagejson的直接連結">​</a></h2><p>有兩種方式可以將我們獲得的結果儲存為json格式。一種方式是使用linux的命令行將結果重定向到一個json檔案中。例如：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; python damun.py 33846 &gt; page.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>另一種方式是直接在Python腳本中將結果儲存為json檔案。以下是一個實際的例子：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">file_name = 'damun_33846.json'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">with open(file_name, 'r', encoding='utf-8') as f:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    my_data = json.loads(f.read())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(my_data) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(type(my_data))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>解析的結果為:
<img loading="lazy" src="https://hackmd.io/_uploads/rkQ5rwxF2.png" class="img_ev3q"></p><p>擷取完成!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="重點精華">重點精華<a href="#重點精華" class="hash-link" aria-label="重點精華的直接連結" title="重點精華的直接連結">​</a></h2><ul><li>PlayWright可以輕鬆的將使用者操作流程紀錄為程式碼。</li><li>PlayWright與Selenium最大的差異，不用刻意搜尋並安裝對應版本的模擬瀏覽器。</li><li>結合常用的Beautiful可以快速解析內容，我偏好用類似CSS Selec。</li><li>用列表推導式將爬梳的資料整理成字典，語法相當簡潔。</li><li>將結果儲存成JSON2檔案，方便後續運用</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="小結">小結<a href="#小結" class="hash-link" aria-label="小結的直接連結" title="小結的直接連結">​</a></h2><p>在上述的Python腳本中，首先定義了我們的檔案名稱。然後，我們使用Python的內建函數open讀取該檔案。最後，我們使用json模組的loads函數將讀取到的資料轉換為Python物件。</p><p>以上就是如何使用PlayWright抓取並分析巴哈姆特動漫瘋的彈幕數據的全過程。透過這個過程，我們不僅學習到如何使用PlayWright，如果有興趣，後續再介紹如何進一步分析數據，歡迎留言讓我知道。</p>]]></content>
        <author>
            <name>Willis Chen</name>
            <uri>https://willismax.github.io/my-site/</uri>
        </author>
        <category label="Python" term="Python"/>
        <category label="Tech" term="Tech"/>
        <category label="PlayWright" term="PlayWright"/>
        <category label="爬蟲" term="爬蟲"/>
        <category label="資料分析" term="資料分析"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[用HackMD API打造個人專屬LINE BOT助手]]></title>
        <id>https://willismax.github.io/my-site/blog/用HackMD API打造個人專屬LINE BOT助手</id>
        <link href="https://willismax.github.io/my-site/blog/用HackMD API打造個人專屬LINE BOT助手"/>
        <updated>2023-06-09T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[用 "LINE Chat BOT"可以解決什麼問題]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="用-line-chat-bot可以解決什麼問題">用 "LINE Chat BOT"可以解決什麼問題<a href="#用-line-chat-bot可以解決什麼問題" class="hash-link" aria-label="用 &quot;LINE Chat BOT&quot;可以解決什麼問題的直接連結" title="用 &quot;LINE Chat BOT&quot;可以解決什麼問題的直接連結">​</a></h2><ul><li>隨手筆記的需求</li><li>從不同APP分享連結的蒐集去處</li><li>不用再經手別的生產力工具，直接歸一到最熟悉的HackMD</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="建立-line-chat-bot-的流程">建立 "LINE Chat BOT" 的流程<a href="#建立-line-chat-bot-的流程" class="hash-link" aria-label="建立 &quot;LINE Chat BOT&quot; 的流程的直接連結" title="建立 &quot;LINE Chat BOT&quot; 的流程的直接連結">​</a></h2><ul><li>首先要申請 <a href="https://hackmd.io/@hackmd-api/developer-portal" target="_blank" rel="noopener noreferrer">HackMD API</a> 。</li><li>在 <a href="https://developers.line.biz/zh-hant/" target="_blank" rel="noopener noreferrer">LINE Developers</a> 創一個專屬 Channel，取得Token等資訊與訊息設定。</li><li>在 Fly.io 創立雲端服務、建立好開發連線環境。</li><li>Fork 我的<a href="https://github.com/willismax/hackmd-line-bot-on-fly" target="_blank" rel="noopener noreferrer">GitHub HackMD LINE bot on fly 程式碼</a>，修改為您準備部屬在 Fly.io 的 LINE BOT 程式。</li><li>將您 Fly.io 的連結 <code>https://[APP Name].fly.io/callback</code>填入您LINE Channel 的 Webhook。</li><li>感動! 成功!。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="line-chat-bot程式碼"><code>LINE Chat BOT</code><a href="https://github.com/willismax/hackmd-line-bot-on-fly" target="_blank" rel="noopener noreferrer">程式碼</a><a href="#line-chat-bot程式碼" class="hash-link" aria-label="line-chat-bot程式碼的直接連結" title="line-chat-bot程式碼的直接連結">​</a></h2><blockquote><p><a href="https://github.com/willismax/hackmd-line-bot-on-fly" target="_blank" rel="noopener noreferrer">https://github.com/willismax/hackmd-line-bot-on-fly</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="line-chat-bot-功能需求">"LINE Chat BOT" 功能需求<a href="#line-chat-bot-功能需求" class="hash-link" aria-label="&quot;LINE Chat BOT&quot; 功能需求的直接連結" title="&quot;LINE Chat BOT&quot; 功能需求的直接連結">​</a></h2><ul><li><p>標示<code>@靈感</code>為開頭的文字，將作為一個獨立的靈感筆記。
<img loading="lazy" src="https://hackmd.io/_uploads/r1Vo7wRzo.png" alt="link text" class="img_ev3q"></p></li><li><p>標示<code>@TODO</code>為開頭的文字，將寫入一個連續的的代辦清單。
<img loading="lazy" src="https://hackmd.io/_uploads/HJHbEDAfo.png" class="img_ev3q"></p></li><li><p>無上述標示的文字，將寫入一個連續附加的在暫存筆記。也就是從別的文章分享的超連結都直接灌到此暫存筆記。
<img loading="lazy" src="https://hackmd.io/_uploads/HJbQNvRzi.png" class="img_ev3q"></p></li><li><p>如果要整理筆記，用電腦編輯整理即可。</p></li></ul><p>:::spoiler 部署教學文參考</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="如何建立-line-bot">如何建立 LINE bot<a href="#如何建立-line-bot" class="hash-link" aria-label="如何建立 LINE bot的直接連結" title="如何建立 LINE bot的直接連結">​</a></h2><ul><li><p>在 <a href="https://developers.line.biz/zh-hant/" target="_blank" rel="noopener noreferrer">LINE Developers</a>
登入您的 LINE 帳號，建立 Provider 以及所屬 Channel， Channel 名稱就是您的 LINE bot 名稱，管理方式如同 <a href="https://tw.linebiz.com/login/" target="_blank" rel="noopener noreferrer">LINE 官方帳號</a>。</p></li><li><p>用程式控制的聊天機器人需要以下3個參數，請保管好勿外流。
在此範例程式中，需要將 Channel 查到的以下參數填入<code>config.py</code>檔案。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CHANNEL_ACCESS_TOKEN = ''</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CHANNEL_SECRET = ''</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LINE_USER_ID = ''</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="在-flyio-創立與部署雲端服務">在 Fly.io 創立與部署雲端服務<a href="#在-flyio-創立與部署雲端服務" class="hash-link" aria-label="在 Fly.io 創立與部署雲端服務的直接連結" title="在 Fly.io 創立與部署雲端服務的直接連結">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="先-clone-flyio-的-python-示範專案">先 Clone <a href="http://fly.io/" target="_blank" rel="noopener noreferrer">Fly.io</a> 的 Python 示範專案。<a href="#先-clone-flyio-的-python-示範專案" class="hash-link" aria-label="先-clone-flyio-的-python-示範專案的直接連結" title="先-clone-flyio-的-python-示範專案的直接連結">​</a></h3><ul><li><p>在本機電腦<a href="https://git-scm.com/downloads" target="_blank" rel="noopener noreferrer">安裝git</a>，您可以先完成以下示範範例後，再將程式碼改成LINE Chat BOT程式碼即可。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/fly-apps/python-hellofly-flask</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>進入專案資料夾</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd  .\python-hellofly-flask\</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>安裝該專案所需的外部套件</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python -m pip install -r requirements.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>[選用]<!-- --> 如果要在本機進行開發測試，可以設置環境變數<code>FLASK_APP</code>，目的是指定主程式的執行檔，對此專案而言主程式為<code>hellofly.py</code>，經指定後<code>flask run</code>指定就是跑主程式，而且要結合 <a href="https://ngrok.com/" target="_blank" rel="noopener noreferrer">Ngrok</a>建立臨時通道，對您來說太複雜的話可以跳過，只是各種測試就必須等待部署後。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//設置環境變數</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export FLASK_APP=hellofly.py   #linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set FLASK_APP=hellofly.py   #windows</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//日後啟動flask的指令</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flask run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>!! 如果用環境變數都跑不出來，退而求其次，在<code>hellofly.py</code>最後加入:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if __name__ == '__main__':</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    app.run(debug=True)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>啟動flask指令改為<code>python hello.py</code>，請注意，<a href="https://www.maxlist.xyz/2020/04/30/flask-helloworld/" target="_blank" rel="noopener noreferrer">這不是flask現在建議的啟用方式</a>，本方法只適用於本機測試。</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="使用fly-ctl-指令工具完成部署">使用<code>fly ctl</code> 指令工具完成部署<a href="#使用fly-ctl-指令工具完成部署" class="hash-link" aria-label="使用fly-ctl-指令工具完成部署的直接連結" title="使用fly-ctl-指令工具完成部署的直接連結">​</a></h3><p>上述範例程式碼測試無誤後，接續安裝 <code>fly ctl</code> 指令工具。Fly.io 最方便部署服務的方式是使用終端機指令工具<code>flyctl</code>，可以讓本機直接部署。</p><ul><li><p><a href="https://fly.io/docs/getting-started/installing-flyctl/" target="_blank" rel="noopener noreferrer">安裝flyctl</a><br>
<!-- -->PowerShell</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">iwr https://fly.io/install.ps1 -useb | iex</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Mac</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">brew install flyctl #MAC</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Linux</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -L https://fly.io/install.sh | sh #LINUX</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><a href="https://fly.io/docs/getting-started/log-in-to-fly/" target="_blank" rel="noopener noreferrer">用 flyctl 登入 fly.io</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flyctl auth login</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>啟動一個 fly App 專案，執行 <code>flyctl launch</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flyctl launch</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>選擇伺服器區域，台灣鄰近的區域有香港、東京可選。</p></li><li><p>修改程式，這邊在範例專案中特別提醒，<code>Procfile</code>檔案為設定連線服務用，與您的主程式檔名務必相符，也就是原本為<code>web: gunicorn server:app</code>記得改成<code>web: gunicorn hellofly:app</code>，這原理跟部署在 Heroku 是一樣的。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># file name: Procfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">web: gunicorn hellofly:app  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              ^^^^^^^^記得確認為主程式</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>檢查完程式後，一鍵佈署。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flyctl deploy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>查看佈署，其中<code>hostname</code>就是網址了，可以用<code>flyctl status</code>確認狀態、用<code>flyctl open</code>開啟 APP、用<code>flyctl logs</code>確認有無 BUG。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flyctl status    </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flyctl open</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flyctl logs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>如果需要<a href="https://fly.io/docs/reference/secrets/" target="_blank" rel="noopener noreferrer">設定 secrets</a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flyctl secrets set DATABASE_URL= ....</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>取消 secrets</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flyctl secrets unset DATABASE_URL= ....</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>列出 secrets list</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flyctl secrets list</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="line-chat-bot程式碼-1"><code>LINE Chat BOT</code><a href="https://github.com/willismax/hackmd-line-bot-on-fly" target="_blank" rel="noopener noreferrer">程式碼</a><a href="#line-chat-bot程式碼-1" class="hash-link" aria-label="line-chat-bot程式碼-1的直接連結" title="line-chat-bot程式碼-1的直接連結">​</a></h2><blockquote><p><a href="https://github.com/willismax/hackmd-line-bot-on-fly" target="_blank" rel="noopener noreferrer">https://github.com/willismax/hackmd-line-bot-on-fly</a></p></blockquote><ul><li><p>可以對照您上述部署完成的<code>python-hellofly-flask</code>程式碼進行修改，</p><ul><li>填入對應的參數到<code>config.py</code></li><li>修改<code>app.py</code></li><li>修改<code>requestments.txt</code></li></ul></li><li><p>執行<code>flyctl deploy</code>部署。請注意，<code>*.toml</code>請用您自己的，該檔案是由 <code>flyctl launch</code> 產生，為了您的專案部屬所需的檔案，用範例檔會出錯唷。</p></li><li><p>也請記得補上 HackMD API token 與筆記ID相關資訊:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">HACKMD_API_TOKEN = ''</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TODO_NOTE_ID = '' #  paste your fixed TODO note id, len == 22</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEMP_NOTE_ID = '' # paste your fixed TEMP note id, len == 22</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>上述有問題的話就耐心看<code>flyctl logs</code>，我常作的方式是開兩個終端機，一個執行操作、一個看 log 。</p></li><li><p>部署完成後，記得把您的 fly.io 專屬服務網址貼入 LINE Channel 的 Webhook ，網址應為 <code>https://[APP Name].fly.io/callback</code> ，特別是 <code>*/callback</code> 記得填，並且設定開啟 Webhook。</p></li><li><p>恭喜您完成!</p></li></ul>]]></content>
        <author>
            <name>Willis Chen</name>
            <uri>https://willismax.github.io/my-site/</uri>
        </author>
        <category label="web" term="web"/>
        <category label="Tech" term="Tech"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[2023六角學院軟體工程師體驗營心得]]></title>
        <id>https://willismax.github.io/my-site/blog/2023六角學院軟體工程師體驗營心得</id>
        <link href="https://willismax.github.io/my-site/blog/2023六角學院軟體工程師體驗營心得"/>
        <updated>2023-06-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[多元化的課程內容 📚🎥]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="多元化的課程內容-">多元化的課程內容 📚🎥<a href="#多元化的課程內容-" class="hash-link" aria-label="多元化的課程內容 📚🎥的直接連結" title="多元化的課程內容 📚🎥的直接連結">​</a></h2><p>六角學院是台灣前端知名的線上教學服務平台，這次已非常少的售價開設了短期密集軟工體驗營，體驗的內容包含前端基礎、CSS、SCSS、切版任務、JS、Jquery、Ajax、Axios，在這次的體驗營中，我們在有限的時間內接觸了相當多的課程內容。這些線上影音很多是不同的直播、教學課程的集合。真的讓我感到既驚訝又欣喜！🎉</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="每日的切版與js練習-️">每日的切版與JS練習 🖥️🔬<a href="#每日的切版與js練習-️" class="hash-link" aria-label="每日的切版與JS練習 🖥️🔬的直接連結" title="每日的切版與JS練習 🖥️🔬的直接連結">​</a></h2><p>除了假日以外，每日我們都有關於切版、JS的兩種練習。最後，這些練習都會回到產出作業上，讓我們有機會將所學應用到實際操作中，真的是學以致用！💡📝</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="作業審視與助教回饋-">作業審視與助教回饋 📋🔍<a href="#作業審視與助教回饋-" class="hash-link" aria-label="作業審視與助教回饋 📋🔍的直接連結" title="作業審視與助教回饋 📋🔍的直接連結">​</a></h2><p>在產出作業的過程中，作業等級越高越完整。而這其中，最讓我感動的是有助教群細心審視我們的作業並提供回饋。這樣的機會真的非常難得，我們能夠從中學習到很多，進步也就在這一點一滴中實現。👍👏</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="交流討論與提問-️">交流討論與提問 🗣️💭<a href="#交流討論與提問-️" class="hash-link" aria-label="交流討論與提問 🗣️💭的直接連結" title="交流討論與提問 🗣️💭的直接連結">​</a></h2><p>最後，也很感謝能夠在課程提問區提出問題，並透過交流討論來解答疑惑，慢慢走也是會往前的😊🐢</p><p>總結來說，我真的很感謝六角學院提供這樣的體驗機會。從中我學習到很多，並且在學習的道路上也逐步累積。期待下一次的學習體驗！🎈🚀</p>]]></content>
        <author>
            <name>Willis Chen</name>
            <uri>https://willismax.github.io/my-site/</uri>
        </author>
        <category label="web" term="web"/>
        <category label="Tech" term="Tech"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[從亞當斯密看不見的手認識ESG]]></title>
        <id>https://willismax.github.io/my-site/blog/從亞當斯密看不見的手認識ESG</id>
        <link href="https://willismax.github.io/my-site/blog/從亞當斯密看不見的手認識ESG"/>
        <updated>2023-05-25T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[為什麼會有這篇文章?]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="為什麼會有這篇文章">為什麼會有這篇文章?<a href="#為什麼會有這篇文章" class="hash-link" aria-label="為什麼會有這篇文章?的直接連結" title="為什麼會有這篇文章?的直接連結">​</a></h2><ul><li>近期工作與推動ESG高度相關，也記錄此時此刻的一些心得感想。</li><li>本篇文章內容由Bing協作。</li></ul><h1>從亞當斯密的"看不見的手"討論ESG</h1><p>你有沒有聽過亞當斯密的「看不見的手」？這是一個經濟學的名詞，指的是市場機能能夠自動調節供需，讓每個人都能追求自己的利益，同時也促進社會的福祉。聽起來很神奇，但是這個「看不見的手」其實有一個隱藏的秘密，那就是它其實是一隻「ESG」的手！今天我想和大家聊聊亞當斯密的"看不見的手"和ESG之間的關係。😊</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="什麼是esg">什麼是ESG？<a href="#什麼是esg" class="hash-link" aria-label="什麼是ESG？的直接連結" title="什麼是ESG？的直接連結">​</a></h2><p>ESG是環境、社會和治理（Environmental, Social and Governance）的縮寫，它是一種評估企業對社會責任和可持續發展的影響的方法。ESG涵蓋了許多方面，例如減少碳排放、保護生物多樣性、改善勞工權益、反對貪腐和提高透明度等。🌎</p><p>近年來，ESG越來越受到投資者、消費者和政策制定者的重視，因為它不僅關係到企業的道德和聲譽，也關係到企業的長期競爭力和風險管理。許多研究表明，高ESG表現的企業往往能夠創造更高的股東價值、更低的資金成本、更強的創新能力和更高的員工忠誠度。💰</p><p><img loading="lazy" src="https://source.unsplash.com/960x640/?esg" alt="ESG" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="什麼是看不見的手">什麼是"看不見的手"？<a href="#什麼是看不見的手" class="hash-link" aria-label="什麼是&quot;看不見的手&quot;？的直接連結" title="什麼是&quot;看不見的手&quot;？的直接連結">​</a></h2><p>"看不見的手"是一個出現在經濟學之父亞當斯密的《國富論》和《道德情操論》中的一個詞彙，它指的是在自由市場中，每個人追求自己的利益，通過價格機制，最終會促進社會整體的福利，就像有一隻看不見的手在指導經濟活動一樣。👋</p><p>舉個例子，假設你想買一個蘋果，你會在市場上找到最便宜的蘋果賣家，而賣家則會根據供需關係設定一個合理的價格，這樣你們雙方都能得到最大的滿足。同時，這也會刺激其他蘋果生產者提高產量和品質，降低成本和價格，從而增加社會的總產出和消費。🍎</p><p><img loading="lazy" src="https://source.unsplash.com/960x640/?apple" alt="蘋果" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="看不見的手和esg有什麼關係">"看不見的手"和ESG有什麼關係？<a href="#看不見的手和esg有什麼關係" class="hash-link" aria-label="&quot;看不見的手&quot;和ESG有什麼關係？的直接連結" title="&quot;看不見的手&quot;和ESG有什麼關係？的直接連結">​</a></h2><p>你可能會覺得"看不見的手"和ESG是相互對立的概念，因為前者強調市場自由和個人利益，後者強調社會責任和公共利益。但其實，它們之間並不是那麼簡單的對立關係，而是有著複雜而微妙的互動。😉</p><p>首先，亞當斯密在他的另一本著作《道德情操論》中，提出了一個重要的概念，那就是「同情心」（sympathy）。他認為人類是一種社會性的動物，具有與他人共感和同理的能力，這種能力讓我們能夠關心他人的利益和幸福，也讓我們能夠遵守道德規範和社會規則。這不就是ESG中的「社會」嗎？</p><blockquote><p>你可能會問，那他怎麼沒有提到「愛心」（love）呢？因為他知道愛情是盲目的，而市場是明智的！（笑）</p></blockquote><p>其次，亞當斯密在他的《國富論》中，也沒有忽視環境問題。他指出了農業對土地資源的消耗和浪費，並且主張應該通過稅收來抑制農業生產過剩和土地荒廢。他還提出了「公共工程」（public works）的概念，認為政府應該負責建設和維護基礎設施，如道路、橋樑、港口等，以促進交通和貿易，也以保護環境和公共安全。這不就是ESG中的「環境」嗎？</p><blockquote><p>你可能會問，那他怎麼沒有提到「節約」（save）呢？因為他知道節約是美德，但消費才能帶動經濟！（笑）</p></blockquote><p>最後，亞當斯密在他的《國富論》中，也強調了治理問題。他批判了當時英國政府對商業和貿易的過度干預和限制，例如重商主義政策、商業壟斷、關稅壁壘等。他主張政府應該放寬市場准入，保護私有財產權和契約自由，打擊貪污和腐敗，保障法治和司法公正。這不就是ESG中的「治理」嗎？</p><blockquote><p>你可能會問，那他怎麼沒有提到「民主」（democracy）呢？因為他知道民主是好事，但市場才是王道！（笑）</p></blockquote><p><img loading="lazy" src="https://source.unsplash.com/960x640/?competition" alt="競爭" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="結語">結語<a href="#結語" class="hash-link" aria-label="結語的直接連結" title="結語的直接連結">​</a></h2><p>所以你看，亞當斯密其實是一個ESG的先驅！他不僅提出了「看不見的手」這個偉大的經濟學思想，也提出了「ESG」這個偉大的企業社會責任思想！我們今天所看到的市場經濟和企業社會責任，都是他留給我們的寶貴遺產！。😊</p><p>感謝大家閱讀我的部落格文章，如果你有任何意見或建議，歡迎在下面留言或聯絡我。下次再見！👋
(本文笑點提供: Bing)</p>]]></content>
        <author>
            <name>Willis Chen</name>
            <uri>https://willismax.github.io/my-site/</uri>
        </author>
        <category label="ESG" term="ESG"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[使用 GitHub Actions 自動部署 Docusaurus 網誌並優化 SEO]]></title>
        <id>https://willismax.github.io/my-site/blog/使用 GitHub Actions 自動部署 Docusaurus 網誌並優化 SEO</id>
        <link href="https://willismax.github.io/my-site/blog/使用 GitHub Actions 自動部署 Docusaurus 網誌並優化 SEO"/>
        <updated>2023-03-09T23:00:00.000Z</updated>
        <summary type="html"><![CDATA[hackmd-github-sync-badge]]></summary>
        <content type="html"><![CDATA[<p><a href="https://hackmd.io/pMZX7mLQRN-hD-MG3ASReA" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://hackmd.io/pMZX7mLQRN-hD-MG3ASReA/badge" alt="hackmd-github-sync-badge" class="img_ev3q"></a></p><p><img loading="lazy" src="https://hackmd.io/_uploads/ryzvXkw12.png" class="img_ev3q"></p><p>如果你是一個 Docusaurus 使用者，你可能已經知道如何使用 Github Pages 部署你的網誌。但是，手動更新並部署你的網誌非常耗時，而且容易出錯。為了解決這個問題，你可以使用 GitHub Actions 來自動生成和部署你的網誌，這樣你就可以專注於撰寫新的文章了。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="什麼是-github-actions">什麼是 GitHub Actions？<a href="#什麼是-github-actions" class="hash-link" aria-label="什麼是 GitHub Actions？的直接連結" title="什麼是 GitHub Actions？的直接連結">​</a></h2><p>GitHub Actions 是一個自動化工具，可以幫助你自動執行各種任務，例如建立和測試你的應用程序，將你的應用程序部署到不同的環境中，或者自動發佈你的網誌文章。你可以使用 GitHub Actions 的預設工作流程，或者創建自己的自訂工作流程。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="如何使用-github-actions-自動部署-docusaurus-網誌">如何使用 GitHub Actions 自動部署 Docusaurus 網誌？<a href="#如何使用-github-actions-自動部署-docusaurus-網誌" class="hash-link" aria-label="如何使用 GitHub Actions 自動部署 Docusaurus 網誌？的直接連結" title="如何使用 GitHub Actions 自動部署 Docusaurus 網誌？的直接連結">​</a></h2><p>下面是一個簡單的步驟，可以幫助你在 GitHub Actions 中自動生成和部署你的 Docusaurus 網誌。</p><ol><li><p>在你的 Docusaurus 存儲庫中，創建一個名為 <code>.github/workflows/deploy.yml</code> 的文件。</p></li><li><p>在 <code>deploy.yml</code> 文件中添加以下內容：</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deploy website</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/checkout@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Install Node.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/setup</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">node@v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">node-version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'14.x'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Build and deploy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> JamesIves/github</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pages</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deploy</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">action@4.1.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">branch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gh</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">folder</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">clean</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>這個工作流程會在主分支上進行 push 時運行。它會在最新的 Ubuntu 環境中運行，安裝 Node.js，構建你的 Docusaurus 網誌，然後將它部署到 <code>gh-pages</code> 分支。</p></li><li><p>在你的 Docusaurus 存儲庫中，建立一個名為 <code>build</code> 的文件夾。</p></li><li><p>執行以下命令，生成你的 Docusaurus 網誌：</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm run build` </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>這將在 <code>build</code> 文件夾中生成編譯後的靜態網頁。</p></li><li><p>執行以下命令，將你的更改提交到存儲庫中：</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git add .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git commit </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">m "Update website"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git push</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>這會觸發 GitHub Actions，自動生成和部署你的 Docusaurus 網誌。你可以在 GitHub Actions 的頁面上查看進度和結果。如果一切順利，你的網誌應該已經部署到 <code>gh-pages</code> 分支中。</p></li><li><p>現在你可以在瀏覽器中訪問你的網誌，例如 <code>https://yourusername.github.io/yourblog/</code>。如果一切正常，你應該能夠看到你的網誌文章。</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="如何優化你的-docusaurus-網誌的-seo">如何優化你的 Docusaurus 網誌的 SEO？<a href="#如何優化你的-docusaurus-網誌的-seo" class="hash-link" aria-label="如何優化你的 Docusaurus 網誌的 SEO？的直接連結" title="如何優化你的 Docusaurus 網誌的 SEO？的直接連結">​</a></h2><p>  現在你已經成功地使用 GitHub Actions 自動部署了你的 Docusaurus 網誌，接下來你可能想要優化你的網誌的 SEO，以便更好地吸引流量和讀者。以下是一些簡單的技巧，可以幫助你優化你的網誌的 SEO。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-使用關鍵字進行標題和內容的優化">1. 使用關鍵字進行標題和內容的優化<a href="#1-使用關鍵字進行標題和內容的優化" class="hash-link" aria-label="1. 使用關鍵字進行標題和內容的優化的直接連結" title="1. 使用關鍵字進行標題和內容的優化的直接連結">​</a></h3><p>  在你的網誌文章的標題和內容中使用關鍵字，以便搜索引擎能夠更好地理解你的內容，並將其排名更高。但是，不要過度使用關鍵字，否則你的內容可能會被搜索引擎視為垃圾郵件。關鍵字優化的訣竅是參考Google搜尋結果的相關搜尋，將相關搜尋的文章進一步整理為合適的內容，讓讀者能在這一篇文章就可以滿足需求。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-創建有價值的內容">2. 創建有價值的內容<a href="#2-創建有價值的內容" class="hash-link" aria-label="2. 創建有價值的內容的直接連結" title="2. 創建有價值的內容的直接連結">​</a></h3><p>  創建有價值的內容是吸引讀者和排名更高的關鍵。寫出具有深度和價值的內容，以便讀者和搜索引擎都能夠看到你的專業知識和價值，自己的洞見非常重要，讀者不會想只看到類似 ChatGPT 生成的大量文章。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-使用適當的標記和元數據">3. 使用適當的標記和元數據<a href="#3-使用適當的標記和元數據" class="hash-link" aria-label="3. 使用適當的標記和元數據的直接連結" title="3. 使用適當的標記和元數據的直接連結">​</a></h3><p>  使用適當的標記和元數據，例如標題標記、描述標記和關鍵字標記，以幫助搜索引擎更好地理解你的內容。同時，使用適當的元數據，例如 Open Graph 協議和 Twitter 卡片，以使你的內容在社交媒體上分享時更有吸引力。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-使用友好的-url">4. 使用友好的 URL<a href="#4-使用友好的-url" class="hash-link" aria-label="4. 使用友好的 URL的直接連結" title="4. 使用友好的 URL的直接連結">​</a></h3><p>  使用友好的 URL，以便讀者和搜索引擎更好地理解你的內容。使用有意義的字詞和短條目，避免使用難以理解的符號和數字。同時，使用靜態 URL，以便搜索引擎可以更輕鬆地索引你的網站。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-關注網站的速度和性能">5. 關注網站的速度和性能<a href="#5-關注網站的速度和性能" class="hash-link" aria-label="5. 關注網站的速度和性能的直接連結" title="5. 關注網站的速度和性能的直接連結">​</a></h3><p>  優化你的網站的速度和性能，以便更好地吸引流量和提高排名。使用快速的網站主機和優化的圖像，避免使用過多的 JavaScript 和 CSS，以減少網站的加載時間。同時，使用快取和網站緩存，以便減少服務器負載並提高網站的速度。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-建立高質量的內部和外部連結">6. 建立高質量的內部和外部連結<a href="#6-建立高質量的內部和外部連結" class="hash-link" aria-label="6. 建立高質量的內部和外部連結的直接連結" title="6. 建立高質量的內部和外部連結的直接連結">​</a></h3><p>  建立高質量的內部和外部連結，以幫助搜索引擎更好地理解你的內容並提高你的排名。使用有意義的錨文本和鏈接到相關的內容，同時建立高質量的外部鏈接，以提高你的網站的權威性和排名。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-監測和分析你的流量和排名">7. 監測和分析你的流量和排名<a href="#7-監測和分析你的流量和排名" class="hash-link" aria-label="7. 監測和分析你的流量和排名的直接連結" title="7. 監測和分析你的流量和排名的直接連結">​</a></h3><p>  監測和分析你的網站的流量和排名，以了解你的目標讀者是誰，以及他們如何找到你的內容。使用 Google Analytics 或其他分析工具來跟踪你的流量和排名，並根據這些數據調整你的 SEO 策略。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="結論">結論<a href="#結論" class="hash-link" aria-label="結論的直接連結" title="結論的直接連結">​</a></h2><p>使用 GitHub Actions 自動部署你的 Docusaurus 網誌是一個簡單而有效的方式，可以幫助你更輕鬆地管理和更新你的網誌。同時，優化你的網誌的 SEO 是一個重要的步驟，可以幫助你吸引更多的流量和讀者，並提高你的排名。遵循上述的技巧和策略，你可以建立一個成功的網誌，吸引更多的讀者和流量，並在搜索引擎上排名更高。</p>]]></content>
        <author>
            <name>Willis Chen</name>
            <uri>https://willismax.github.io/my-site/</uri>
        </author>
        <category label="GitHub Actions" term="GitHub Actions"/>
        <category label="Docusaurus" term="Docusaurus"/>
        <category label="Tech" term="Tech"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[用 Colab 免費體驗 AI 繪圖]]></title>
        <id>https://willismax.github.io/my-site/blog/用 Colab 免費體驗 AI 繪圖</id>
        <link href="https://willismax.github.io/my-site/blog/用 Colab 免費體驗 AI 繪圖"/>
        <updated>2023-03-05T10:00:00.000Z</updated>
        <summary type="html"><![CDATA[hackmd-github-sync-badge]]></summary>
        <content type="html"><![CDATA[<p><a href="https://hackmd.io/DeV6o4MAS1e8QLQ-dD0cMA" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://hackmd.io/DeV6o4MAS1e8QLQ-dD0cMA/badge" alt="hackmd-github-sync-badge" class="img_ev3q"></a></p><p><img loading="lazy" src="https://hackmd.io/_uploads/S1NNdMMyh.png" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="您也想要自己用ai繪圖嗎">您也想要自己用AI繪圖嗎?<a href="#您也想要自己用ai繪圖嗎" class="hash-link" aria-label="您也想要自己用AI繪圖嗎?的直接連結" title="您也想要自己用AI繪圖嗎?的直接連結">​</a></h2><ul><li>生成式AI ( AIGC ) 是2023年的顯學，開源的 AI 繪圖模型越來越多，在<a href="https://civitai.com/" target="_blank" rel="noopener noreferrer">Civitai</a>有非常多網友創作(需註冊，許多有年齡限制)，您也想自己嘗試嗎? 網路上已經有許多自行下載執行 Python 程式與模型，但就需要自備 GPU 顯卡。</li><li>有網友在此 <a href="https://github.com/camenduru/stable-diffusion-webui-colab" target="_blank" rel="noopener noreferrer">GitHub</a> 整理諸多 AIGC 模型，而且可以用 Colab 直接產圖， Colab 是個可以免費暫時執行 GPU 運算的虛擬機，可執行 Python 及 Linux指令，您唯一要付出的是等待時間，一起來製作香香的圖吧。
<img loading="lazy" src="https://hackmd.io/_uploads/SJ2JuMGy2.png" class="img_ev3q"></li></ul><p>在這個範例，您只要兩個步驟就可以完成囉:</p><ol><li>打開以下 <a href="https://colab.research.google.com/drive/15NIShDq3Q7TH8ziwnAlQBFhKLTgqJO0m?usp=sharing" target="_blank" rel="noopener noreferrer">Colab<img loading="lazy" src="https://hackmd.io/_uploads/ryg0Yfzkh.png" class="img_ev3q"></a> ，一鍵執行以下程式碼，程式跑完會出現3個連結，點選第2個連結會開啟新分頁，是生圖的 UI 介面。
<img loading="lazy" src="https://hackmd.io/_uploads/SkBJbGGy2.png" class="img_ev3q"></li><li>在介面新介面的 Text2Img 有兩個文字框，可以輸入以下兩個正向、負向語詞(Prompt)，
<img loading="lazy" src="https://hackmd.io/_uploads/Hy5rCbMJ3.png" class="img_ev3q"><ul><li><em>正面語詞</em><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">8k, RAW photo, best quality, masterpiece:1.2), (realistic, photo-realistic:1.4), ultra-detailed, (Kpop idol),perfect detail ,  looking at viewer,make up,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>負面語詞<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">paintings,sketches, (worst quality:2), (low quality:2), (normal quality:2), lowres, normal quality, ((monochrome)), ((grayscale)), skin spots, acnes, skin blemishes, bad anatomy,(long hair:1.4),DeepNegative,(fat:1.2),facing away, looking away,tilted head, {Multiple people}, lowres,bad anatomy,bad hands, text, error, missing fingers,extra digit, fewer digits, cropped, worstquality, low quality, normal quality,jpegartifacts,signature, watermark, username,blurry,bad feet,cropped,poorly drawn hands,poorly drawn face,mutation,deformed,worst quality,low quality,normal quality,jpeg artifacts,signature,watermark,extra fingers,fewer digits,extra limbs,extra arms,extra legs,malformed limbs,fused fingers,too many fingers,long neck,cross-eyed,mutated hands,polar lowres,bad body,bad proportions,gross proportions,text,error,missing fingers,missing arms,missing legs,extra digit, extra arms, extra leg, extra foot,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li></ol><ul><li>還可以img2img繼續生圖
<img loading="lazy" src="https://hackmd.io/_uploads/H1V8Jfz1h.png" class="img_ev3q"></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="colab-遏阻了腳本指令濫用">Colab 遏阻了腳本指令濫用<a href="#colab-遏阻了腳本指令濫用" class="hash-link" aria-label="Colab 遏阻了腳本指令濫用的直接連結" title="Colab 遏阻了腳本指令濫用的直接連結">​</a></h2><ul><li>鑒於越來越多人使用 Colab 跑 stable-diffusion，已經對前述 WebUI 的腳本操作封鎖，您可以有限制的使用或付費，但最好的情況是自行下載在自己的電腦跑，如果電腦運算資源夠的話。</li><li>相信未來會有更適當的做法，像是 Bing 可以直接以文字繪圖(模型是 OpenAI 的 Dell.E)，或者使用 <a href="https://leonardo.ai/" target="_blank" rel="noopener noreferrer">Leonardo.ai</a> 就可以做出驚人的效果。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="參考">參考<a href="#參考" class="hash-link" aria-label="參考的直接連結" title="參考的直接連結">​</a></h2><ul><li><a href="https://www.kocpc.com.tw/archives/482754" target="_blank" rel="noopener noreferrer">https://www.kocpc.com.tw/archives/482754</a></li><li><a href="https://github.com/camenduru/stable-diffusion-webui-colab" target="_blank" rel="noopener noreferrer">https://github.com/camenduru/stable-diffusion-webui-colab</a></li><li><a href="https://leonardo.ai/" target="_blank" rel="noopener noreferrer">https://leonardo.ai/</a></li></ul>]]></content>
        <author>
            <name>Willis Chen</name>
            <uri>https://willismax.github.io/my-site/</uri>
        </author>
        <category label="AIGC" term="AIGC"/>
        <category label="Tech" term="Tech"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[使用GitHubPages部署Docusaurus]]></title>
        <id>https://willismax.github.io/my-site/blog/使用GitHubPages部署Docusaurus</id>
        <link href="https://willismax.github.io/my-site/blog/使用GitHubPages部署Docusaurus"/>
        <updated>2023-03-03T10:00:00.000Z</updated>
        <summary type="html"><![CDATA[如何使用 GitHub Pages 部署 Docusaurus，可以透過以下步驟，輕鬆地建立自己的網誌。]]></summary>
        <content type="html"><![CDATA[<p><img loading="lazy" src="https://hackmd.io/_uploads/ryKZyWv1h.png" class="img_ev3q"></p><p>如何使用 GitHub Pages 部署 Docusaurus，可以透過以下步驟，輕鬆地建立自己的網誌。</p><ul><li>步驟1. 事前準備一個 <a href="https://github.com/" target="_blank" rel="noopener noreferrer">GitHub</a> 帳號，並且安裝 <a href="https://git-scm.com/downloads" target="_blank" rel="noopener noreferrer">Git 工具</a> 及 <a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer">Node.js</a>。</li><li>步驟2. 創建新的 Repository，作為 GitHub Pages 靜態網頁存放用。</li><li>步驟3. 下載 Docusaurus 範本</li><li>步驟4. 安裝和測試 Docusaurus</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="步驟一事前準備">步驟一：事前準備<a href="#步驟一事前準備" class="hash-link" aria-label="步驟一：事前準備的直接連結" title="步驟一：事前準備的直接連結">​</a></h2><p>在開始之前，我們需要先確保以下條件都已經滿足：</p><ul><li>一個 GitHub 帳號，可以在 <a href="https://github.com/" target="_blank" rel="noopener noreferrer">GitHub</a> 上免費註冊。</li><li>安裝 Git 工具，可以從 <a href="https://git-scm.com/downloads" target="_blank" rel="noopener noreferrer">Git 官網</a> 下載安裝包進行安裝。</li><li>安裝 Node.js 和 npm，可以在 <a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer">Node.js 官網</a> 下載安裝包進行安裝。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="步驟二創建新的-repository">步驟二：創建新的 Repository<a href="#步驟二創建新的-repository" class="hash-link" aria-label="步驟二：創建新的 Repository的直接連結" title="步驟二：創建新的 Repository的直接連結">​</a></h2><p>首先，在 GitHub 上創建一個新的 Repository，用來存放網誌的代碼和部署文件。以下是創建 Repository 的步驟：</p><ol><li>登錄 GitHub，進入主頁面。</li><li>點擊右上角的 “+” 按鈕，然後選擇 “New repository”。</li><li>在創建 Repository 的頁面中，填寫 Repository 名稱、描述和設置等信息，然後點擊 “Create repository” 按鈕創建 Repository。</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="步驟三下載-docusaurus-範本">步驟三：下載 Docusaurus 範本<a href="#步驟三下載-docusaurus-範本" class="hash-link" aria-label="步驟三：下載 Docusaurus 範本的直接連結" title="步驟三：下載 Docusaurus 範本的直接連結">​</a></h2><p>接下來，我們需要下載 Docusaurus 的範本代碼，作為網誌的基礎。以下是下載 Docusaurus 範本的步驟：</p><ol><li>打開命令行工具，進入要存放 Docusaurus 範本的文件夾。</li><li>輸入以下命令，下載最新版本的 Docusaurus 範本：<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npx @docusaurus/init@latest init my-blog classic</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>執行命令後，Docusaurus 範本會被下載到當前目錄下的 my-blog 文件夾中。</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="步驟四安裝和測試-docusaurus">步驟四：安裝和測試 Docusaurus<a href="#步驟四安裝和測試-docusaurus" class="hash-link" aria-label="步驟四：安裝和測試 Docusaurus的直接連結" title="步驟四：安裝和測試 Docusaurus的直接連結">​</a></h2><p>在下載 Docusaurus 範本之後，我們需要進行安裝和測試，以確保網誌可以正常運行。以下是安裝和測試 Docusaurus 的步驟：</p><ol><li><p>進入 my-blog 文件夾，打開命令行工具。</p></li><li><p>輸入以下命令，安裝 Docusaurus 和相關的依賴：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>安裝完成後，輸入以下命令，啟動 Docusaurus 的本地測試服務：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>在 Github 上建立新的 repository</p><p>在 Github 上建立一個新的 repository，命名為 <code>{username}.github.io</code>，其中 <code>username</code> 是你的 Github 使用者名稱。例如，我的 Github 使用者名稱是 <code>chatgpt</code>，因此我會命名我的 repository 為 <code>chatgpt.github.io</code>。</p></li><li><p>將 Docusaurus 專案上傳至 Github</p><p>在你的電腦上開啟終端機（Terminal）或命令提示字元（Command Prompt），進入到 Docusaurus 專案的根目錄下，並執行以下指令：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git remote add origin git@github.com:{username}/{username}.github.io.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm run build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm run deploy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其中，<code>username</code> 是你的 Github 使用者名稱，請注意要改成你自己的。這些指令的作用如下：</p><ul><li><code>git init</code>：初始化 Git 儲存庫。</li><li><code>git remote add origin git@github.com:{username}/{username}.github.io.git</code>：設定 Git 儲存庫的遠端位置。</li><li><code>npm run build</code>：建立 Docusaurus 專案的靜態網頁檔案。</li><li><code>npm run deploy</code>：將靜態網頁檔案上傳至 Github。</li></ul><p>在執行 <code>npm run deploy</code> 的時候，會需要你輸入 Github 的使用者名稱和密碼（或是 Personal Access Token）。請輸入正確的資訊後，等待上傳完成。</p></li><li><p>檢查網站是否正常運作</p><p>完成上傳後，打開瀏覽器，輸入 <code>https://{username}.github.io</code>，其中 <code>username</code> 是你的 Github 使用者名稱，就可以看到你的 Docusaurus 網站了！如果你看到了你的網站，那就代表部署成功了。</p></li><li><p>編輯 Docusaurus 網站</p><p>現在，你可以開始編輯你的 Docusaurus 網站了。編輯完成後，只需要執行以下指令：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git add .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git commit -m "Update website"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git push origin main</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="複製代碼至剪貼簿" title="複製" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其中，<code>Update website</code> 是你的提交訊息，你可以自己替換成任何訊息。執行這些指令後，你的修改就會自動更新到你的 Github Pages 上了。</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="結語">結語<a href="#結語" class="hash-link" aria-label="結語的直接連結" title="結語的直接連結">​</a></h2><p>以上使用 Github Pages 部署 Docusaurus 教學，希望能幫助到您。</p>]]></content>
        <author>
            <name>Willis Chen</name>
            <uri>https://willismax.github.io/my-site/</uri>
        </author>
        <category label="GitHub Actions" term="GitHub Actions"/>
        <category label="Docusaurus" term="Docusaurus"/>
        <category label="Tech" term="Tech"/>
    </entry>
</feed>